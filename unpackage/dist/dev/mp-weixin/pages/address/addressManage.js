(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/addressManage"],{539:
/*!*******************************************************************************************!*\
  !*** X:/yumo27/uni-app/hangfengsc-app/main.js?{"page":"pages%2Faddress%2FaddressManage"} ***!
  \*******************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";(function(e){a(/*! uni-pages */7);n(a(/*! vue */2));var t=n(a(/*! ./pages/address/addressManage.vue */540));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},540:
/*!************************************************************************!*\
  !*** X:/yumo27/uni-app/hangfengsc-app/pages/address/addressManage.vue ***!
  \************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./addressManage.vue?vue&type=template&id=428471f5& */541),r=a(/*! ./addressManage.vue?vue&type=script&lang=js& */543);for(var s in r)"default"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);a(/*! ./addressManage.vue?vue&type=style&index=0&lang=scss& */545);var i,o=a(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */17),d=Object(o["default"])(r["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],i);d.options.__file="pages/address/addressManage.vue",t["default"]=d.exports},541:
/*!*******************************************************************************************************!*\
  !*** X:/yumo27/uni-app/hangfengsc-app/pages/address/addressManage.vue?vue&type=template&id=428471f5& ***!
  \*******************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addressManage.vue?vue&type=template&id=428471f5& */542);a.d(t,"render",(function(){return n["render"]})),a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),a.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),a.d(t,"components",(function(){return n["components"]}))},542:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!X:/yumo27/uni-app/hangfengsc-app/pages/address/addressManage.vue?vue&type=template&id=428471f5& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,a){"use strict";var n;a.r(t),a.d(t,"render",(function(){return r})),a.d(t,"staticRenderFns",(function(){return i})),a.d(t,"recyclableRender",(function(){return s})),a.d(t,"components",(function(){return n}));var r=function(){var e=this,t=e.$createElement;e._self._c},s=!1,i=[];r._withStripped=!0},543:
/*!*************************************************************************************************!*\
  !*** X:/yumo27/uni-app/hangfengsc-app/pages/address/addressManage.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addressManage.vue?vue&type=script&lang=js& */544),r=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=r.a},544:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!X:/yumo27/uni-app/hangfengsc-app/pages/address/addressManage.vue?vue&type=script&lang=js& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(/*! ./node_modules/@babel/runtime/regenerator */4)),r=s(a(/*! uni-request */18));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a,n,r,s,i){try{var o=e[s](i),d=o.value}catch(c){return void a(c)}o.done?t(d):Promise.resolve(d).then(n,r)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function o(e){i(s,n,r,o,d,"next",e)}function d(e){i(s,n,r,o,d,"throw",e)}o(void 0)}))}}var d=function(){Promise.all(/*! require.ensure | components/mpvue-citypicker/mpvueCityPicker */[a.e("common/vendor"),a.e("components/mpvue-citypicker/mpvueCityPicker")]).then(function(){return resolve(a(/*! @/components/mpvue-citypicker/mpvueCityPicker.vue */1161))}.bind(null,a)).catch(a.oe)},c={components:{mpvueCityPicker:d},data:function(){return{areaList:[],themeColor:"#007AFF",cityPickerValue:[0,0,0],addressData:{name:"",mobile:"",addressName:"选择省市区",address:"",area:"",default:!1},manageType:{},form_address:{},default_address_id:!1}},computed:{regionName:function(){return console.log(this.region),this.region.map((function(e){return e.name})).join(" ")}},onLoad:function(t){console.log(t);var a="新增收货地址";this.addressData.default=!1,"edit"===t.type&&(a="编辑收货地址",this.addressData=JSON.parse(t.data),this.default_address_id=!0,!0===this.addressData.default_address_id?this.addressData.default=!0:this.addressData.default=!1),this.manageType=t.type,e.setNavigationBarTitle({title:a})},methods:{switchChange:function(t){var a=this;return o(n.default.mark((function s(){return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(t),!0!==t.detail.value){n.next=7;break}return n.next=4,(0,r.default)({url:"/addresses/"+a.addressData.id+"/status/",method:"put",headers:{Authorization:"JWT "+e.getStorageSync("userInfo").token}}).then((function(t){console.log(t),200===t.status?(a.$api.msg("默认地址设置成功"),setTimeout((function(t){e.navigateBack()}),800)):a.$api.msg("error")})).catch((function(e){console.log(e.response),void 0===e.response&&a.$api.msg("服务器错误")}));case 4:n.sent,n.next=9;break;case 7:a.$api.msg("请至少有一个地址为默认"),setTimeout((function(){e.navigateBack()}),800);case 9:a.addressData.default=t.detail;case 10:case"end":return n.stop()}}),s)})))()},onCancel:function(e){console.log(e)},chooseCity:function(){this.$refs.mpvueCityPicker.show()},onConfirm:function(e){console.log(e),this.addressData.province_id=e.provinceCode,this.addressData.city_id=e.cityCode,this.addressData.district_id=e.areaCode,this.addressData.addressName=e.label,this.cityPickerValue=e.value},chooseLocation:function(){e.chooseLocation({success:function(){var e=o(n.default.mark((function e(t){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fail:function(e){console.log(e),this.openSetting()}})},openSetting:function(){if(permission.isIOS){var e=plus.ios.import("UIApplication"),t=e.sharedApplication(),a=plus.ios.import("NSURL"),n=a.URLWithString("app-settings:");t.openURL(n),plus.ios.deleteObject(n),plus.ios.deleteObject(a),plus.ios.deleteObject(t)}else{var r=plus.android.importClass("android.content.Intent"),s=plus.android.importClass("android.provider.Settings"),i=plus.android.importClass("android.net.Uri"),o=plus.android.runtimeMainActivity(),d=new r;d.setAction(s.ACTION_APPLICATION_DETAILS_SETTINGS);var c=i.fromParts("package",o.getPackageName(),null);d.setData(c),o.startActivity(d)}},setAddress:function(t){var a=this;return o(n.default.mark((function s(){return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t),n.next=3,(0,r.default)({url:"/addresses/"+a.addressData.id+"/",data:t,method:"put",headers:{Authorization:"JWT "+e.getStorageSync("userInfo").token}}).then((function(e){console.log(e)})).catch((function(e){})).catch((function(e){console.log(e)}));case 3:n.sent;case 4:case"end":return n.stop()}}),s)})))()},getAddress:function(t){var a=this;return o(n.default.mark((function s(){return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t),console.log(a.addressData),a.form_address={title:a.addressData.receiver,receiver:a.addressData.receiver,province_id:a.addressData.province_id,city_id:a.addressData.city_id,district_id:a.addressData.district_id,place:a.addressData.place,mobile:a.addressData.mobile,addresses:t.addresses,addressName:t.addressName},n.next=5,(0,r.default)({url:"/addresses/",method:"post",data:a.form_address,headers:{Authorization:"JWT "+e.getStorageSync("userInfo").token}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));case 5:n.sent;case 6:case"end":return n.stop()}}),s)})))()},confirm:function(t){var a=this;return o(n.default.mark((function r(){return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.receiver){n.next=3;break}return a.$api.msg("请填写收货人姓名"),n.abrupt("return");case 3:if(/(^1[3|4|5|7|8][0-9]{9}$)/.test(t.mobile)){n.next=6;break}return a.$api.msg("请输入正确的手机号码"),n.abrupt("return");case 6:if(t.addressName){n.next=9;break}return a.$api.msg("请在地图选择所在位置"),n.abrupt("return");case 9:if(t.place){n.next=12;break}return a.$api.msg("请填写详细地址信息"),n.abrupt("return");case 12:a.addressData.address=t.address,a.addressData.addressName=t.addressName,a.addressData.receiver=t.receiver,a.addressData.title=t.title,console.log(a.manageType,a.addressData.title),"edit"===a.manageType?(a.addressData.address=t.address,a.setAddress(t)):"add"===a.manageType&&a.getAddress(t),a.$api.prePage().refreshList(a.addressData,a.manageType),a.$api.msg("地址".concat("edit"==a.manageType?"修改":"添加","成功")),setTimeout((function(){e.navigateBack()}),800);case 21:case"end":return n.stop()}}),r)})))()},condelete:function(t){var a=this;return o(n.default.mark((function s(){return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,r.default)({url:"/addresses/"+a.addressData.id+"/",method:"delete",headers:{Authorization:"JWT "+e.getStorageSync("userInfo").token}}).then((function(n){console.log(n),a.$api.prePage().refreshList(t),a.$api.msg("删除成功"),setTimeout((function(){e.navigateBack()}),800),a.addresses.splice(index,1)})).catch((function(e){console.log(e)}));case 2:n.sent;case 3:case"end":return n.stop()}}),s)})))()}}};t.default=c}).call(this,a(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},545:
/*!**********************************************************************************************************!*\
  !*** X:/yumo27/uni-app/hangfengsc-app/pages/address/addressManage.vue?vue&type=style&index=0&lang=scss& ***!
  \**********************************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addressManage.vue?vue&type=style&index=0&lang=scss& */546),r=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=r.a},546:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!X:/yumo27/uni-app/hangfengsc-app/pages/address/addressManage.vue?vue&type=style&index=0&lang=scss& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,a){}},[[539,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/address/addressManage.js.map