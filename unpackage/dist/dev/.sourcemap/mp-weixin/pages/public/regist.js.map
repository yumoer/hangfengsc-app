{"version":3,"sources":["uni-app:///main.js","webpack:///X:/yumo27/uni-app/hangfengsc-app/pages/public/regist.vue?edb2","webpack:///X:/yumo27/uni-app/hangfengsc-app/pages/public/regist.vue?5b82","webpack:///X:/yumo27/uni-app/hangfengsc-app/pages/public/regist.vue?81a9","webpack:///X:/yumo27/uni-app/hangfengsc-app/pages/public/regist.vue?3fe0","uni-app:///pages/public/regist.vue","webpack:///X:/yumo27/uni-app/hangfengsc-app/pages/public/regist.vue?e627"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,4C,mDACAA,EAAWC,a;;;;2DCHX,4QACIC,EADJ,iHASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,0BACZ,aAAAF,E;;;;2GCvBf,mzB;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,ueAA+xB,eAAG,G;;;;wMC+GlyB,kBAIA,6B,4iCACA,CACA,KADA,WAEA,OACA,YACA,UACA,YACA,aACA,aACA,YAEA,aACA,iBACA,kBACA,WACA,QACA,UAGA,OAlBA,SAkBA,GACA,eACA,4BAOA,gBACA,8BADA,IAEA,UAFA,WAGA,cACA,4BAGA,UAPA,WAQA,cACA,4BAIA,QAbA,WAcA,cACA,6BAGA,YAlBA,SAkBA,GACA,kCACA,wBAEA,QAtBA,WAuBA,kBAGA,WA1BA,WA2BA,2BACA,2BAIA,WAhCA,WAgCA,WAEA,yCACA,eAGA,4CAMA,aAIA,yBACA,yBAEA,mEACA,gBACA,wBAMA,uHACA,kBACA,8BACA,UACA,UACA,WACA,iBACA,aAEA,UACA,iBACA,uCACA,sCAEA,cACA,iCAIA,mBACA,mBAlCA,wBANA,uBAHA,yBAgDA,oBApFA,WAoFA,yHACA,cACA,WACA,WAIA,kCAEA,6BAEA,uEACA,yBACA,kBACA,wCAEA,mBACA,kBAIA,8EACA,8BAtBA,8CA0BA,cA9GA,WAuHA,eACA,0EACA,gCAEA,OADA,oBACA,gCAEA,UAGA,SAhIA,WAgIA,kIAMA,WANA,uBAOA,qBAPA,0BAUA,oEACA,gBACA,wBAZA,UAmBA,WAnBA,wBAoBA,oBApBA,gCAsBA,qBAtBA,wBAuBA,uBAvBA,8BA4BA,YA5BA,wBA6BA,sBA7BA,gCA+BA,sBA/BA,wBAgCA,yBAhCA,8BAkCA,yBAlCA,wBAmCA,wBAnCA,8BAwCA,mCACA,YAzCA,wBA0CA,qBA1CA,8BA4CA,sCA5CA,wBA6CA,oBA7CA,8BAkDA,SAlDA,wBAmDA,qBAnDA,2BAsDA,sBACA,sBAEA,gEACA,gBACA,wBA3DA,WAkEA,WAlEA,wBAmEA,uBAnEA,8BAqEA,sCArEA,wBAsEA,sBAtEA,8BA0EA,iBA1EA,wBA2EA,sBA3EA,2BA8EA,wBACA,GACA,oBACA,gBACA,oBACA,sBACA,sBACA,oBACA,eAEA,8CACA,eACA,iBACA,gBACA,aACA,0BAGA,gBACA,0CAEA,mBACA,kBApGA,kD;;;;2DC/QA,u0BAA66C,eAAG,G","file":"pages/public/regist.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/public/regist.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./regist.vue?vue&type=template&id=a3a6679a&\"\nvar renderjs\nimport script from \"./regist.vue?vue&type=script&lang=js&\"\nexport * from \"./regist.vue?vue&type=script&lang=js&\"\nimport style0 from \"./regist.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/public/regist.vue\"\nexport default component.exports","export * from \"-!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./regist.vue?vue&type=template&id=a3a6679a&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./regist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./regist.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"container\">\r\n\t\t<view class=\"left-bottom-sign\"></view>\r\n\t\t<view class=\"back-btn yticon icon-zuojiantou-up\" @click=\"navBack\"></view>\r\n\t\t<view class=\"right-top-sign\"></view>\r\n\t\t<!-- 设置白色背景防止软键盘把下部绝对定位元素顶上来盖住输入框等 -->\r\n\t\t<view class=\"wrapper\">\r\n\t\t\t<view class=\"left-top-sign\">REGIST<view class=\"welcome\">\r\n\t\t\t\t新用户注册\r\n\t\t\t</view></view>\r\n\t\t\t\r\n\t\t\t<view class=\"input-content\">\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<text class=\"tit\">用户名</text>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\t:value=\"username\" \r\n\t\t\t\t\t\tplaceholder=\"请输入用户名\"\r\n\t\t\t\t\t\tmaxlength=\"20\"\r\n\t\t\t\t\t\tdata-key=\"username\"\r\n\t\t\t\t\t\t@input=\"inputChange\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<text class=\"tit\">密码</text>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t:value=\"password\" \r\n\t\t\t\t\t\tplaceholder=\"请输入8-20位数字、字母组合密码\"\r\n\t\t\t\t\t\tplaceholder-class=\"input-empty\"\r\n\t\t\t\t\t\tmaxlength=\"20\"\r\n\t\t\t\t\t\tpassword \r\n\t\t\t\t\t\tdata-key=\"password\"\r\n\t\t\t\t\t\t@input=\"inputChange\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<text class=\"tit\">确认密码</text>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t:value=\"password2\" \r\n\t\t\t\t\t\tplaceholder=\"请重复8-20位数字、字母组合密码\"\r\n\t\t\t\t\t\tplaceholder-class=\"input-empty\"\r\n\t\t\t\t\t\tmaxlength=\"20\"\r\n\t\t\t\t\t\tpassword \r\n\t\t\t\t\t\tdata-key=\"password2\"\r\n\t\t\t\t\t\t@input=\"inputChange\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"input-item\" style=\"position: relative;\">\r\n\t\t\t\t\t<text class=\"tit\">验证码</text>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\t:value=\"imageCode\" \r\n\t\t\t\t\t\tplaceholder=\"请输入验证码\"\r\n\t\t\t\t\t\tplaceholder-class=\"input-empty\"\r\n\t\t\t\t\t\tmaxlength=\"4\"\r\n\t\t\t\t\t\tdata-key=\"imageCode\"\r\n\t\t\t\t\t\t@input=\"inputChange\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<view style=\"position: absolute;right: 0;top: 20upx;\" @click=\"generate_image_code\">\r\n\t\t\t\t\t\t<image style=\"width: 100px;height: 35px;\" :src=\"image_code_url\" mode=\"\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<text class=\"tit\">手机号码</text>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\t:value=\"mobile\" \r\n\t\t\t\t\t\tplaceholder=\"请输入手机号\"\r\n\t\t\t\t\t\tmaxlength=\"11\"\r\n\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\tdata-key=\"mobile\"\r\n\t\t\t\t\t\t@input=\"inputChange\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-item\" style=\"position: relative;\">\r\n\t\t\t\t\t<text class=\"tit\">手机验证码</text>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\t:value=\"sms_code\" \r\n\t\t\t\t\t\tplaceholder=\"请输入手机验证码\"\r\n\t\t\t\t\t\tplaceholder-class=\"input-empty\"\r\n\t\t\t\t\t\tmaxlength=\"6\"\r\n\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\tdata-key=\"sms_code\"\r\n\t\t\t\t\t\t@input=\"inputChange\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<view style=\"position: absolute;right: 0;\" v-if=\"send\">\r\n\t\t\t\t\t\t<button type=\"text\" @click=\"mobileCode\" style=\"background-color: #fa436a;color: #fff;font-size: 12px;height: 30px;line-height: 30px;\">获取验证码</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style=\"position: absolute;right: 0;\" v-if=\"!send\">\r\n\t\t\t\t\t\t<button type=\"text\" disabled=\"\" @click=\"mobileCode\" style=\"color: #000;font-size: 12px;height: 30px;line-height: 30px;\">{{time}}s后重新获取</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<button class=\"confirm-btn\" @click=\"toRegist\">注册</button>\r\n\t\t\r\n\t\t<view class=\"register-section\">\r\n\t\t\t<view >\r\n\t\t\t\t<view style=\"margin-top: 20upx;color: #606266;\">\r\n\t\t\t\t\t注册即同意\r\n\t\t\t\t\t<text style=\"color: #fa436a;\" @click=\"toService\">《行丰用户服务协议》</text>\r\n\t\t\t\t\t<text style=\"color: #fa436a;\" @click=\"toPrivacy\">《行丰隐私保护政策》</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script>\r\n\timport {  \r\n        mapMutations  \r\n    } from 'vuex';\r\n\t\r\n\timport uniRequest from 'uni-request';\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tusername:'',\r\n\t\t\t\tmobile: '',\r\n\t\t\t\tpassword: '',\r\n\t\t\t\tpassword2: '',\r\n\t\t\t\timageCode:'',\r\n\t\t\t\tsms_code:'',\r\n\t\t\t\t// checked:true,\r\n\t\t\t\tallow:'true',\r\n\t\t\t\timage_code_id: '', // uuid\r\n\t\t\t\timage_code_url:'', // 访问后端视图的地址，得到image\r\n\t\t\t\tgetText:'',\r\n\t\t\t\tsend:true,\r\n\t\t\t\ttime:60,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options){\r\n\t\t\tconsole.log(options)\r\n\t\t\tthis.generate_image_code();\r\n\t\t},\r\n\t\t/* created(){\r\n\t\t\t// 当模板渲染结束时会被调用的\r\n\t\t    this.generate_image_code();\r\n\t\t}, */\r\n\t\t\r\n\t\tmethods: {\r\n\t\t\t...mapMutations(['login']),\r\n\t\t\ttoService(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pages/set/service'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoPrivacy(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pages/set/privacy'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\ttoLogin(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pages/public/login'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinputChange(e){\r\n\t\t\t\tconst key = e.currentTarget.dataset.key;\r\n\t\t\t\tthis[key] = e.detail.value;\r\n\t\t\t},\r\n\t\t\tnavBack(){\r\n\t\t\t\tuni.navigateBack();  \r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tchangeType(){\r\n\t\t\t\tthis.checked = !this.checked\r\n\t\t\t\tconsole.log(this.checked)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 发送验证码\r\n\t\t\tmobileCode(){\r\n\t\t\t\t// 验证码验证\r\n\t\t\t\tconsole.log(this.imageCode,this.getText)\r\n\t\t\t\tif(!this.imageCode){ \r\n\t\t\t\t\tthis.$api.msg('请输入验证码');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}else if(this.imageCode.toLowerCase() !== this.getText){\r\n\t\t\t\t\tthis.$api.msg('验证码错误');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 手机号验证\r\n\t\t\t\tif(!this.mobile){ \r\n\t\t\t\t\tthis.$api.msg('请输入手机号');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(this.mobile.length !== 11){\r\n\t\t\t\t\t\tthis.$api.msg('手机号格式错误')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuniRequest.get('/mobiles/'+this.mobile+'/count/').then(res=>{\r\n\t\t\t\t\t\tif(res.data.count>0){\r\n\t\t\t\t\t\t\tthis.$api.msg('手机号已存在')\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tuniRequest.get('/sms_codes/'+this.mobile+'/?text='+this.getText+'&image_code_id='+this.image_code_id).then(res=>{\r\n\t\t\t\t\tif(res.status === 200){\r\n\t\t\t\t\t\tvar num = setInterval(()=>{\r\n\t\t\t\t\t\t\tthis.send = false\r\n\t\t\t\t\t\t\tthis.time -= 1\r\n\t\t\t\t\t\t\tif(this.time < 1){\r\n\t\t\t\t\t\t\t\tclearInterval(num)\r\n\t\t\t\t\t\t\t\tthis.send = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},1000)\r\n\t\t\t\t\t}else if(res.status === 400){\r\n\t\t\t\t\t\tthis.$api.msg(res.data.non_field_errors[0])\r\n\t\t\t\t\t\tif(res.data.non_field_errors[0] === '无效验证码'){\r\n\t\t\t\t\t\t\t// this.generate_image_code();\r\n\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\turl:'/pages/public/regist'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t})\r\n\t\t\t}, \r\n\t\t\t\r\n\t\t\t// 生成一个验证码的编号，并设置页面中验证码img标签的src属性\r\n\t\t\tasync generate_image_code(){\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'flag',\r\n\t\t\t\t\tdata: '1'\r\n\t\t\t\t});\r\n\t\t\t\t// 生成一个编号\r\n\t\t\t\t// 严格一点的使用uuid保证编号唯一， 不是很严谨的情况下，也可以使用时间戳\r\n\t\t\t\tthis.image_code_id = this.generate_uuid();\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(this.image_code_id)\r\n\t\t\t\t\r\n\t\t\t\tuniRequest.post('/image_codes/text/'+this.image_code_id).then(res=>{\r\n\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\tif(res.data.text !== undefined){\r\n\t\t\t\t\t\tthis.getText = res.data.text.toLowerCase()\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t// 设置页面中验证码img标签的src属性\r\n\t\t\t\tthis.image_code_url = \"http://47.94.106.106:8000/image_codes/\" + this.image_code_id + \"/\";\r\n\t\t\t\tconsole.log(this.image_code_url)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 生成uuid\r\n\t\t\tgenerate_uuid(){\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tvar d = new Date().getTime();\r\n\t\t\t\td += performance.now();\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tvar d = new Date().getTime();\r\n\t\t\t\td += Date.now();\r\n\t\t\t\t// #endif\r\n\t\t\t\tconsole.log(d)\r\n\t\t\t\tvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n\t\t\t\t  var r = (d + Math.random()*16)%16 | 0;\r\n\t\t\t\t  d = Math.floor(d/16);\r\n\t\t\t\t  return (c =='x' ? r : (r&0x3|0x8)).toString(16);\r\n\t\t\t\t});\r\n\t\t\t\treturn uuid;\r\n\t\t\t},  \r\n\t\t\t\r\n\t\t\tasync toRegist(){\r\n\t\t\t\t/* console.log(this.checked)\r\n\t\t\t\tthis.allow = '' + this.checked */\r\n\t\t\t\t\r\n\t\t\t\t// const {username,mobile, password,password2,imageCode,allow} = this;\r\n\t\t\t\t// 用户名验证\r\n\t\t\t\tif(!this.username){\r\n\t\t\t\t\tthis.$api.msg('请输入用户名');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuniRequest.get('/usernames/'+this.username+'/count/').then(res=>{\r\n\t\t\t\t\t\tif(res.data.count>0){\r\n\t\t\t\t\t\t\tthis.$api.msg('用户名已存在')\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 密码验证\r\n\t\t\t\tif(!this.password){\r\n\t\t\t\t\tthis.$api.msg('请输入密码');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}else if(this.password.length < 8){\r\n\t\t\t\t\tthis.$api.msg('密码不能少于8位');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 确认密码验证\r\n\t\t\t\tif(!this.password2){\r\n\t\t\t\t\tthis.$api.msg('请输入确认密码');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}else if(this.password2.length < 8){\r\n\t\t\t\t\tthis.$api.msg('确认密码不能少于8位');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}else if(this.password2 !== this.password){\r\n\t\t\t\t\tthis.$api.msg('两次密码输入不一致');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 验证码验证\r\n\t\t\t\tconsole.log(this.imageCode,this.getText)\r\n\t\t\t\tif(!this.imageCode){ \r\n\t\t\t\t\tthis.$api.msg('请输入验证码');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}else if(this.imageCode.toLowerCase() !== this.getText){\r\n\t\t\t\t\tthis.$api.msg('验证码错误');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 手机号验证\r\n\t\t\t\tif(!this.mobile){ \r\n\t\t\t\t\tthis.$api.msg('请输入手机号');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(this.mobile.length !== 11){\r\n\t\t\t\t\t\tthis.$api.msg('手机号格式错误')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuniRequest.get('/mobiles/'+this.mobile+'/count/').then(res=>{\r\n\t\t\t\t\t\tif(res.data.count>0){\r\n\t\t\t\t\t\t\tthis.$api.msg('手机号已存在')\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 手机验证码验证\r\n\t\t\t\tif(!this.sms_code){\r\n\t\t\t\t\tthis.$api.msg('请输入手机验证码');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}else if(this.sms_code.toLowerCase() !== this.sms_code){\r\n\t\t\t\t\tthis.$api.msg('手机验证码错误');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(this.allow !== 'true'){\r\n\t\t\t\t\tthis.$api.msg('请同意用户协议');\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(this.sms_code)\r\n\t\t\t\tconst sendData = {\r\n\t\t\t\t\tusername:this.username,\r\n\t\t\t\t\tmobile:this.mobile,\r\n\t\t\t\t\tpassword:this.password,\r\n\t\t\t\t\tpassword2:this.password2,\r\n\t\t\t\t\timageCode:this.imageCode,\r\n\t\t\t\t\tsms_code:this.sms_code,\r\n\t\t\t\t\tallow:this.allow,\r\n\t\t\t\t };\r\n\t\t\t\tuniRequest.post('/users/',sendData).then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.status === 201){\r\n\t\t\t\t\t\tthis.login(res.data);\r\n\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\turl:'/pages/user/user'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(res.status === 400){\r\n\t\t\t\t\t\tthis.$api.msg(res.data.non_field_errors[0])\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t}\n</script>\n\n<style lang='scss'>\r\n\tuni-radio .uni-radio-input{\r\n\t\twidth: 14px;\r\n\t\theight: 14px;\r\n\t}\r\n\t\r\n\tpage{\r\n\t\tbackground: #fff;\r\n\t}\r\n\t.container{\r\n\t\tpadding-top: 35px;\r\n\t\tposition:relative;\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\toverflow: hidden;\r\n\t\tbackground: #fff;\r\n\t}\r\n\t.wrapper{\r\n\t\tposition:relative;\r\n\t\tz-index: 90;\r\n\t\tbackground: #fff;\r\n\t\tpadding-bottom: 40upx;\r\n\t\t/* margin-top: 40px; */\r\n\t}\r\n\t.back-btn{\r\n\t\tposition:absolute;\r\n\t\tleft: 40upx;\r\n\t\tz-index: 9999;\r\n\t\tpadding-top: var(--status-bar-height);\r\n\t\ttop: 40upx;\r\n\t\tfont-size: 40upx;\r\n\t\tcolor: $font-color-dark;\r\n\t}\r\n\t.left-top-sign{\r\n\t\tfont-size: 120upx;\r\n\t\tcolor: $page-color-base;\r\n\t\tposition:relative;\r\n\t\tleft: -16upx;\r\n\t}\r\n\t.right-top-sign{\r\n\t\tposition:absolute;\r\n\t\ttop: 80upx;\r\n\t\tright: -30upx;\r\n\t\tz-index: 95;\r\n\t\t&:before, &:after{\r\n\t\t\tdisplay:block;\r\n\t\t\tcontent:\"\";\r\n\t\t\twidth: 400upx;\r\n\t\t\theight: 80upx;\r\n\t\t\tbackground: #b4f3e2;\r\n\t\t}\r\n\t\t&:before{\r\n\t\t\ttransform: rotate(50deg);\r\n\t\t\tborder-radius: 0 50px 0 0;\r\n\t\t}\r\n\t\t&:after{\r\n\t\t\tposition: absolute;\r\n\t\t\tright: -198upx;\r\n\t\t\ttop: 0;\r\n\t\t\ttransform: rotate(-50deg);\r\n\t\t\tborder-radius: 50px 0 0 0;\r\n\t\t\t/* background: pink; */\r\n\t\t}\r\n\t}\r\n\t.left-bottom-sign{\r\n\t\tposition:absolute;\r\n\t\tleft: -270upx;\r\n\t\tbottom: -320upx;\r\n\t\tborder: 100upx solid #d0d1fd;\r\n\t\tborder-radius: 50%;\r\n\t\tpadding: 180upx;\r\n\t}\r\n\t.welcome{\r\n\t\tposition:relative;\r\n\t\tleft: 50upx;\r\n\t\ttop: -90upx;\r\n\t\tfont-size: 46upx;\r\n\t\tcolor: #555;\r\n\t\ttext-shadow: 1px 0px 1px rgba(0,0,0,.3);\r\n\t}\r\n\t.input-content{\r\n\t\tpadding: 0 60upx;\r\n\t\tmargin-top: -20px;\r\n\t}\r\n\t.input-item{\r\n\t\tdisplay:flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items:flex-start;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 0 30upx;\r\n\t\tbackground:$page-color-light;\r\n\t\theight: 100upx;\r\n\t\tborder-radius: 4px;\r\n\t\tmargin-bottom: 20upx;\r\n\t\t&:last-child{\r\n\t\t\tmargin-bottom: 0;\r\n\t\t}\r\n\t\t.tit{\r\n\t\t\theight: 50upx;\r\n\t\t\tline-height: 56upx;\r\n\t\t\tfont-size: $font-sm+2upx;\r\n\t\t\tcolor: $font-color-base;\r\n\t\t}\r\n\t\tinput{\r\n\t\t\theight: 60upx;\r\n\t\t\tfont-size: $font-base + 2upx;\r\n\t\t\tcolor: $font-color-dark;\r\n\t\t\twidth: 100%;\r\n\t\t}\t\r\n\t}\r\n\r\n\t.confirm-btn{\r\n\t\twidth: 630upx;\r\n\t\theight: 76upx;\r\n\t\tline-height: 76upx;\r\n\t\tborder-radius: 50px;\r\n\t\tmargin-top: 40upx;\r\n\t\tbackground: $uni-color-primary;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: $font-lg;\r\n\t\t&:after{\r\n\t\t\tborder-radius: 100px;\r\n\t\t}\r\n\t}\r\n\t.forget-section{\r\n\t\tfont-size: $font-sm+2upx;\r\n\t\tcolor: $font-color-spec;\r\n\t\tmargin-top: 40upx;\r\n\t}\r\n\t.register-section{\r\n\t\tposition:absolute;\r\n\t\tleft: 0;\r\n\t\tbottom: 50upx;\r\n\t\twidth: 100%;\r\n\t\tfont-size: $font-sm+2upx;\r\n\t\tcolor: $font-color-base;\r\n\t\ttext-align: center;\r\n\t\ttext{\r\n\t\t\tcolor: $font-color-spec;\r\n\t\t\tmargin-left: 10upx;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.otherLogin {\r\n\t\twidth: 500upx;\r\n\t\theight: 95upx;\r\n\t\tmargin: 80upx auto;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\t\r\n\t.otherLogin>view {\r\n\t\twidth: 95upx;\r\n\t\theight: 95upx;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 95upx;\r\n\t}\r\n\t\r\n\t.otherLoginTitle {\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 40upx;\r\n\t\ttext-align: center;\r\n\t\tcolor: #555555;\r\n\t\tfont-size: 28upx;\r\n\t\tline-height: 80upx;\r\n\t}\n</style>\n","import mod from \"-!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./regist.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./regist.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}