{"version":3,"sources":["webpack:///X:/yumo27/uni-app/m_hfsc/main.js","webpack:///X:/yumo27/uni-app/m_hfsc/pages/set/update.vue?7d4f","webpack:///X:/yumo27/uni-app/m_hfsc/pages/set/update.vue?5c47","webpack:///X:/yumo27/uni-app/m_hfsc/pages/set/update.vue?c02f","webpack:///X:/yumo27/uni-app/m_hfsc/pages/set/update.vue?426e","webpack:///X:/yumo27/uni-app/m_hfsc/pages/set/update.vue","webpack:///X:/yumo27/uni-app/m_hfsc/pages/set/update.vue?60c2"],"names":["__webpack_require__","_interopRequireDefault","createPage","Page","r","__webpack_exports__","_update_vue_vue_type_template_id_c21bef30___WEBPACK_IMPORTED_MODULE_0__","_update_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","options","__file","_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_hbuilderx_packages_webpack_uni_nvue_loader_lib_templateLoader_js_vue_loader_options_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_update_vue_vue_type_template_id_c21bef30___WEBPACK_IMPORTED_MODULE_0__","render","staticRenderFns","_h","this","$createElement","_self","_c","_withStripped","_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_update_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_update_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","_uniRequest","components","data","info","Minfo","Mtip","updateInfo","latest","packgeSize","packgePath","downloadTask","downloadProgress","buttonLoading","installed","startProgress","currentIsLatest","onReady","getLatest","updated","uni","getStorageSync","onShow","haveDownloaded","onUnload","closeTask","showToast","onPullDownRefresh","stopPullDownRefresh","methods","text","title","duration","icon","installPackge","plus","runtime","install","force","setStorage","completed","success","res","console","log","match","RegExp","showModal","content","showCancel","complete","restart","_this","confirm","cancel","_this2","getProperty","appid","wgtinfo","version","default","url","method","status","response","$api","msg","checkLatest","id","$current","name","number","toFixed","setMinfo","type","abort","createTask","downloadLink","_this3","downloadFile","statusCode","saveFile","tempFilePath","savedFilePath","onProgressUpdate","progress","handleUpdate","os","toLowerCase","androidLink","iosLink","openURL","_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_update_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_E_HBuilderX_2_3_7_20191024_full_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_update_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"pages/set/update.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/set/update.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./update.vue?vue&type=template&id=c21bef30&\"\nimport script from \"./update.vue?vue&type=script&lang=js&\"\nexport * from \"./update.vue?vue&type=script&lang=js&\"\nimport style0 from \"./update.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('c21bef30', component.options)\n    } else {\n      api.reload('c21bef30', component.options)\n    }\n    module.hot.accept(\"./update.vue?vue&type=template&id=c21bef30&\", function () {\n      api.rerender('c21bef30', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"X:/yumo27/uni-app/m_hfsc/pages/set/update.vue\"\nexport default component.exports","export * from \"-!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-hbuilderx\\\\packages\\\\webpack-uni-nvue-loader\\\\lib\\\\templateLoader.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./update.vue?vue&type=template&id=c21bef30&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./update.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport uniRequest from 'uni-request'\r\nexport default {\r\n  components: {\r\n\r\n  },\r\n  data() {\r\n\r\n    return {\r\n      info: '正在加载', // 主标题显示版本号\r\n      Minfo: '未知', // 副标题显示版本类型\r\n      Mtip: '', // 小提示标语\r\n      updateInfo: '无', // 更新摘要\r\n\r\n      latest: null, // 版本信息\r\n      packgeSize: null, // 更新包大小\r\n      packgePath: null, // 更新包的文件地址\r\n      downloadTask: null, // 下载任务\r\n      downloadProgress: 0, // 下载进度\r\n\r\n      buttonLoading: false, // 加载 - 标记\r\n      installed: false, // 是否执行了安装 - 标记\r\n      startProgress: false, // 下载进行 - 标记\r\n      currentIsLatest: true // 当前版本就是最新版本 - 标记\r\n    }\r\n  },\r\n  onReady() {\r\n    this.getLatest()\r\n    const updated = uni.getStorageSync('updated')\r\n    if (updated.packgePath) {\r\n      this.packgePath = updated.packgePath\r\n    }\r\n  },\r\n  // 如果用户下载后没有完成安装，却回到app，则执行这里\r\n  onShow() {\r\n    if (this.installed === true && this.packgePath) {\r\n      this.installed = false\r\n      this.haveDownloaded()\r\n    }\r\n  },\r\n  // 用户关闭页面时检查是否存在下载任务\r\n  onUnload() {\r\n      if (this.downloadTask) {\r\n        this.closeTask()\r\n        this.showToast('更新被取消')\r\n      }\r\n  },\r\n  // 下拉刷新更新\r\n  onPullDownRefresh() {\r\n    this.getLatest()\r\n    uni.stopPullDownRefresh()\r\n  },\r\n  methods: {\r\n    // 封装个Toast方便用\r\n    showToast(text) {\r\n      uni.showToast({\r\n        title: text,\r\n        duration: 3000,\r\n        icon: 'none'\r\n      })\r\n    },\r\n    installPackge() {\r\n      // 安装更新\r\n      plus.runtime.install(this.packgePath, { force: true })\r\n      this.installed = true\r\n      // 保存更新记录到stroage，方便下次启动app时删除安装包\r\n      uni.setStorage({\r\n        key: 'updated',\r\n        data: {\r\n          completed: true,\r\n          packgePath: this.packgePath\r\n        },\r\n        success: (res) => {\r\n          console.log('成功保存更新记录')\r\n        }\r\n      })                  \r\n      // 判断是否为热更新（判断文件名中是否含有.wgt）\r\n      if (this.packgePath.match(RegExp(/.wgt/))) {\r\n        this.installed = false\r\n        uni.showModal({\r\n          title: '提示',\r\n          content: '应用将重启以完成更新',\r\n          showCancel: false,\r\n          complete: () => {\r\n            plus.runtime.restart()\r\n          }\r\n        })\r\n      }\r\n    },\r\n    // 已经下载了更新包但是没有安装\r\n    haveDownloaded() {\r\n      uni.showModal({\r\n          title: '更新尚未完成',\r\n          content: '您已下载更新包，但是还没有完成安装，请问是否要继续安装更新包呢？',\r\n          success: (res) => {\r\n              if (res.confirm) {\r\n                // 安装\r\n                this.installPackge()\r\n              } else if (res.cancel) {\r\n                this.showToast('更新被取消')\r\n              }\r\n          }\r\n      })\r\n    },\r\n    // 取得最新版本及其所有信息\r\n    getLatest() {\r\n\t\tplus.runtime.getProperty(plus.runtime.appid,(wgtinfo)=>{\r\n\t\t\tthis.info = wgtinfo.version // 主标题显示版本号\r\n\t\t\tthis.Minfo = '公测版'\t// 副标题显示版本类型\r\n\t\t\tthis.updateInfo = '无' // 更新摘要\r\n\t\t\t\r\n\t\t\tthis.buttonLoading = true\r\n\t\t\tthis.latest = null\r\n\t\t\t\r\n\t\t\tuniRequest({\r\n\t\t\t  url: '/mobile/check/app/version',\r\n\t\t\t  method: 'post',\r\n\t\t\t  data: {\r\n\t\t\t    appid : plus.runtime.appid,\r\n\t\t\t\tversion : wgtinfo.version\r\n\t\t\t  },\r\n\t\t\t  success: (res) => {\r\n\t\t\t    console.log(res)\r\n\t\t\t    if (res.status === 200) {\r\n\t\t\t      const response = res.data\r\n\t\t\t\t  console.log(response)\r\n\t\t\t\t  if(response.status === false){\r\n\t\t\t\t\t  this.buttonLoading = false\r\n\t\t\t\t\t  this.$api.msg('当前版本已是最新版本')\r\n\t\t\t\t  }else{\r\n\t\t\t\t\t  // this.latest = response.latest.info\r\n\t\t\t\t\t  this.buttonLoading = false\r\n\t\t\t\t\t  this.checkLatest()\r\n\t\t\t\t  }\r\n\t\t\t    }else{\r\n\t\t\t\t\tconsole.log('111')\r\n\t\t\t\t}\r\n\t\t\t  },\r\n\t\t\t  \r\n\t\t\t})\r\n\t\t\tthis.version = wgtinfo.version\r\n\t\t})\r\n      \r\n    },\r\n    // 检查版本\r\n    checkLatest() {\r\n      if (!this.latest.id) {\r\n        this.Mtip = '未找到发行版本'\r\n      } else if (this.$current.id != this.latest.id) { // 当前版本与新版本不符（$current在main.js里）\r\n        this.currentIsLatest = false\r\n        this.Mtip = '发现新版本'\r\n        this.info = this.latest.name + ' ' + this.latest.number //名称 版本号\r\n        this.updateInfo = this.latest.info\r\n        this.packgeSize = (this.latest.packgeSize / 1048576).toFixed(2) + 'MB' // 请求取得的packgeSize是字节大小，转换为保留两位小数的MB\r\n        this.setMinfo(this.latest.type)\r\n      } else {\r\n        this.showToast('当前是最新版了')\r\n        this.currentIsLatest = true\r\n        this.Mtip = '当前是最新版'\r\n        this.info = this.latest.name + ' ' + this.latest.number //名称 版本号\r\n        this.updateInfo = this.latest.info\r\n        this.setMinfo(this.latest.type)\r\n      }\r\n    },\r\n    // 根据英文版本类型选择中文版本类型\r\n    setMinfo(type) {\r\n      switch (type) {\r\n        case 'base':\r\n          this.Minfo = '结构版'\r\n          break\r\n        case 'alpha':\r\n          this.Minfo = '内测版'\r\n          break\r\n        case 'beta':\r\n          this.Minfo = '公测版'\r\n          break\r\n        case 'rc':\r\n          this.Minfo = '终测版'\r\n          break\r\n        case 'release':\r\n          this.Minfo = '正式版'\r\n          break\r\n        default:\r\n          this.Minfo = '未知'\r\n      }\r\n    },\r\n    // 关闭下载任务\r\n    closeTask() {\r\n      this.downloadTask.abort()\r\n      this.downloadTask = null\r\n      this.startProgress = false\r\n    },\r\n    // 开始下载任务\r\n    createTask(downloadLink) {\r\n      //判断是否已经存在任务\r\n      if (this.packgePath) {\r\n        this.haveDownloaded()\r\n      } else {\r\n        this.downloadProgress = 0\r\n        this.startProgress = true\r\n        // 创建下载任务对象\r\n        this.downloadTask = uni.downloadFile({\r\n          url: downloadLink,\r\n          success: (res) => {\r\n            if (res.statusCode === 200) {\r\n              // 保存下载的安装包\r\n              uni.saveFile({\r\n                tempFilePath: res.tempFilePath,\r\n                success: (res) => {\r\n                  this.packgePath = res.savedFilePath\r\n                  // 进行安装\r\n                  this.installPackge()\r\n                  // 任务完成，关闭下载任务\r\n                  this.closeTask()\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n        // 进度条更新\r\n        this.downloadTask.onProgressUpdate((res) => {\r\n          this.downloadProgress = res.progress\r\n        })        \r\n      }\r\n    },\r\n    handleUpdate() {\r\n      // 判断系统类型\r\n      if (plus.os.name.toLowerCase() === 'android') {\r\n        if (this.latest.androidLink && this.latest.androidLink !== '#') { // 我这里默认#也是没有地址，请根据业务自行修改\r\n          // 安卓：创建下载任务\r\n          this.createTask(this.latest.androidLink)\r\n        } else {\r\n          this.showToast('未找到下载地址')\r\n        }\r\n      } else {\r\n        if (this.latest.iosLink && this.latest.iosLink !== '#') { // 我这里默认#也是没有地址，请根据业务自行修改\r\n            // 苹果(A)：进行热更新（如果iosLink是wgt更新包的下载地址）判断文件名中是否含有.wgt\r\n          if (this.latest.iosLink.match(RegExp(/.wgt/))) {\r\n            this.createTask(this.latest.iosLink)\r\n          } else {\r\n            // 苹果(B)：打开商店链接（如果iosLink是苹果商店的地址）\r\n            plus.runtime.openURL(this.latest.iosLink)\r\n          }\r\n        } else {\r\n          this.showToast('未找到ios商店地址')\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./update.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\软件\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./update.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}