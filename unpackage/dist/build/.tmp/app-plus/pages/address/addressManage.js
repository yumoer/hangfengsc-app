(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/addressManage"],{"15d5":function(e,a,t){},1907:function(e,a,t){"use strict";t.r(a);var s=t("50f6"),r=t.n(s);for(var n in s)"default"!==n&&function(e){t.d(a,e,function(){return s[e]})}(n);a["default"]=r.a},"50f6":function(e,a,t){"use strict";(function(e,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=d(t("a34a")),n=d(t("2fb7"));d(t("47a1"));function d(e){return e&&e.__esModule?e:{default:e}}function i(e,a,t,s,r,n,d){try{var i=e[n](d),u=i.value}catch(o){return void t(o)}i.done?a(u):Promise.resolve(u).then(s,r)}function u(e){return function(){var a=this,t=arguments;return new Promise(function(s,r){var n=e.apply(a,t);function d(e){i(n,s,r,d,u,"next",e)}function u(e){i(n,s,r,d,u,"throw",e)}d(void 0)})}}var o={data:function(){return{areaList:{province_list:[],city_list:[],county_list:[]},addressData:{name:"",mobile:"",addressName:"在地图选择",address:"",area:"",default:!1},manageType:{},form_address:{},default_address_id:!1}},onLoad:function(a){e("log",a," at pages\\address\\addressManage.vue:57");var t="新增收货地址";this.addressData.default=!1,"edit"===a.type&&(t="编辑收货地址",this.addressData=JSON.parse(a.data),this.default_address_id=!0,!0===this.addressData.default_address_id?this.addressData.default=!0:this.addressData.default=!1),this.manageType=a.type,s.setNavigationBarTitle({title:t})},methods:{switchChange:function(){var a=u(r.default.mark(function a(t){var d=this;return r.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(e("log",t," at pages\\address\\addressManage.vue:93"),!0!==t.detail.value){a.next=7;break}return a.next=4,(0,n.default)({url:"/addresses/"+this.addressData.id+"/status/",method:"put",headers:{Authorization:"JWT "+s.getStorageSync("userInfo").token}}).then(function(a){e("log",a," at pages\\address\\addressManage.vue:102"),200===a.status?(d.$api.msg("默认地址设置成功"),setTimeout(function(e){s.navigateBack()},800)):d.$api.msg("error")}).catch(function(a){e("log",a.response," at pages\\address\\addressManage.vue:113"),void 0===a.response&&d.$api.msg("服务器错误")});case 4:a.sent,a.next=9;break;case 7:this.$api.msg("请至少有一个地址为默认"),setTimeout(function(){s.navigateBack()},800);case 9:this.addressData.default=t.detail;case 10:case"end":return a.stop()}},a,this)}));function t(e){return a.apply(this,arguments)}return t}(),getAreaList:function(){var a=u(r.default.mark(function a(){var t=this;return r.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,n.default)({url:"/mobile/get/carts/name/all/",method:"get",headers:{Authorization:"JWT "+s.getStorageSync("userInfo").token}}).then(function(a){e("log",a.data," at pages\\address\\addressManage.vue:135");var s=t;void 0!==a.data&&a.data.map(function(e){s.areaList.province_list[e.id]=e.name,void 0!==e.subs&&e.subs.map(function(e){s.areaList.city_list[e.id]=e.name,void 0!==e.subs&&e.subs.map(function(e){s.areaList.county_list[e.id]=e.name})})})}).catch(function(a){e("log",a," at pages\\address\\addressManage.vue:153")});case 2:a.sent;case 3:case"end":return a.stop()}},a,this)}));function t(){return a.apply(this,arguments)}return t}(),chooseLocation:function(){var a=this;s.chooseLocation({success:function(){var t=u(r.default.mark(function t(s){var d,i;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e("log",s," at pages\\address\\addressManage.vue:161"),d={N:s.longitude,S:s.latitude},t.next=4,n.default.post("/areas/gd/province/areasViews/",d);case 4:i=t.sent,e("log",i.data," at pages\\address\\addressManage.vue:182"),a.addressData.province_id=i.data.province.id,a.addressData.city_id=i.data.city.id,a.addressData.district_id=i.data.district.id,a.addressData.addressName=s.address+" "+s.name,a.addressData.address=s.address;case 11:case"end":return t.stop()}},t,this)}));function s(e){return t.apply(this,arguments)}return s}(),fail:function(a){e("log",a," at pages\\address\\addressManage.vue:190"),this.openSetting()}})},openSetting:function(){if(permission.isIOS){var e=plus.ios.import("UIApplication"),a=e.sharedApplication(),t=plus.ios.import("NSURL"),s=t.URLWithString("app-settings:");a.openURL(s),plus.ios.deleteObject(s),plus.ios.deleteObject(t),plus.ios.deleteObject(a)}else{var r=plus.android.importClass("android.content.Intent"),n=plus.android.importClass("android.provider.Settings"),d=plus.android.importClass("android.net.Uri"),i=plus.android.runtimeMainActivity(),u=new r;u.setAction(n.ACTION_APPLICATION_DETAILS_SETTINGS);var o=d.fromParts("package",i.getPackageName(),null);u.setData(o),i.startActivity(u)}},setAddress:function(){var a=u(r.default.mark(function a(t){return r.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e("log",t," at pages\\address\\addressManage.vue:223"),a.next=3,(0,n.default)({url:"/addresses/"+this.addressData.id+"/",data:t,method:"put",headers:{Authorization:"JWT "+s.getStorageSync("userInfo").token}}).then(function(a){e("log",a," at pages\\address\\addressManage.vue:233")}).catch(function(a){e("log",a," at pages\\address\\addressManage.vue:235")});case 3:a.sent;case 4:case"end":return a.stop()}},a,this)}));function t(e){return a.apply(this,arguments)}return t}(),getAddress:function(){var a=u(r.default.mark(function a(t){return r.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e("log",t," at pages\\address\\addressManage.vue:239"),e("log",this.addressData," at pages\\address\\addressManage.vue:240"),this.form_address={title:this.addressData.receiver,receiver:this.addressData.receiver,province_id:this.addressData.province_id,city_id:this.addressData.city_id,district_id:this.addressData.district_id,place:this.addressData.place,mobile:this.addressData.mobile,addresses:t.addresses,addressName:t.addressName},a.next=5,(0,n.default)({url:"/addresses/",method:"post",data:this.form_address,headers:{Authorization:"JWT "+s.getStorageSync("userInfo").token}}).then(function(a){e("log",a," at pages\\address\\addressManage.vue:260")}).catch(function(a){e("log",a," at pages\\address\\addressManage.vue:262")});case 5:a.sent;case 6:case"end":return a.stop()}},a,this)}));function t(e){return a.apply(this,arguments)}return t}(),confirm:function(){var a=u(r.default.mark(function a(t){return r.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(e("log",t," at pages\\address\\addressManage.vue:268"),t.receiver){a.next=4;break}return this.$api.msg("请填写收货人姓名"),a.abrupt("return");case 4:if(/(^1[3|4|5|7|8][0-9]{9}$)/.test(t.mobile)){a.next=7;break}return this.$api.msg("请输入正确的手机号码"),a.abrupt("return");case 7:if(t.addressName){a.next=10;break}return this.$api.msg("请在地图选择所在位置"),a.abrupt("return");case 10:if(t.place){a.next=13;break}return this.$api.msg("请填写详细地址信息"),a.abrupt("return");case 13:this.addressData.address=t.address,this.addressData.addressName=t.addressName,this.addressData.receiver=t.receiver,this.addressData.title=t.title,e("log",this.manageType,this.addressData.title," at pages\\address\\addressManage.vue:294"),"edit"===this.manageType?(this.addressData.address=t.address,this.setAddress(t)):"add"===this.manageType&&this.getAddress(t),this.$api.prePage().refreshList(t,this.manageType),this.$api.msg("地址".concat("edit"==this.manageType?"修改":"添加","成功")),setTimeout(function(){s.navigateBack()},800);case 22:case"end":return a.stop()}},a,this)}));function t(e){return a.apply(this,arguments)}return t}(),condelete:function(){var a=u(r.default.mark(function a(t){var d=this;return r.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,n.default)({url:"/addresses/"+this.addressData.id+"/",method:"delete",headers:{Authorization:"JWT "+s.getStorageSync("userInfo").token}}).then(function(a){e("log",a," at pages\\address\\addressManage.vue:320"),d.$api.prePage().refreshList(t),d.$api.msg("删除成功"),setTimeout(function(){s.navigateBack()},800),d.addresses.splice(index,1)}).catch(function(a){e("log",a," at pages\\address\\addressManage.vue:328")});case 2:a.sent;case 3:case"end":return a.stop()}},a,this)}));function t(e){return a.apply(this,arguments)}return t}()}};a.default=o}).call(this,t("0de9")["default"],t("6e42")["default"])},ad4e:function(e,a,t){"use strict";var s,r=function(){var e=this,a=e.$createElement;e._self._c},n=[];t.d(a,"b",function(){return r}),t.d(a,"c",function(){return n}),t.d(a,"a",function(){return s})},c3a6:function(e,a,t){"use strict";var s=t("15d5"),r=t.n(s);r.a},d998:function(e,a,t){"use strict";t.r(a);var s=t("ad4e"),r=t("1907");for(var n in r)"default"!==n&&function(e){t.d(a,e,function(){return r[e]})}(n);t("c3a6");var d,i=t("f0c5"),u=Object(i["a"])(r["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],d);a["default"]=u.exports},e0a8:function(e,a,t){"use strict";(function(e){t("a8bd"),t("921b");s(t("66fd"));var a=s(t("d998"));function s(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,t("6e42")["createPage"])}},[["e0a8","common/runtime","common/vendor"]]]);