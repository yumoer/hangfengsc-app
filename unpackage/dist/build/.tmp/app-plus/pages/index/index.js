(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{1434:function(e,t,n){},"306d":function(e,t,n){"use strict";(function(e){n("a8bd"),n("921b");a(n("66fd"));var t=a(n("7cd2"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"7cd2":function(e,t,n){"use strict";n.r(t);var a=n("c6df"),i=n("8ba0");for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);n("b596");var s,r=n("f0c5"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);t["default"]=u.exports},"8ba0":function(e,t,n){"use strict";n.r(t);var a=n("8e94"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);t["default"]=i.a},"8e94":function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("a34a")),o=s(n("2fb7"));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,a,i,o,s){try{var r=e[o](s),u=r.value}catch(d){return void n(d)}r.done?t(u):Promise.resolve(u).then(a,i)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,u,"next",e)}function u(e){r(o,a,i,s,u,"throw",e)}s(void 0)})}}var d=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"e0f5"))},c=function(){return n.e("components/uni-countdown/uni-countdown").then(n.bind(null,"c904"))},l=function(){return n.e("components/yomol-upgrade/yomol-upgrade").then(n.bind(null,"d6f8"))},g={components:{uniCountdown:c,uniLoadMore:d,yomolUpgrade:l},data:function(){return{titleNViewBackground:"",swiperCurrent:0,swiperLength:0,carouselList:[],goodsList:[],goodList:[],homePageList:[],skus:[],loadingType:"more",hour:0,minute:0,second:0,load:!1,page:1,version:"",page_size:10,ordering:"create_time",upgradeType:"pkg",upgradeContent:"",upgradeUrl:""}},onLoad:function(){var t=this;this.loadData(),this.getDate(),plus.runtime.getProperty(plus.runtime.appid,function(n){e("log",n.version," at pages\\index\\index.vue:235"),t.version=n.version}),a.getSystemInfo({success:function(n){e("log",n.platform," at pages\\index\\index.vue:240"),"android"==n.platform&&t.AndroidCheckUpdate()}})},onReachBottom:function(){this.page_size=this.page_size+10,this.getDate()},methods:{goto:function(e){},AndroidCheckUpdate:function(){var t=u(i.default.mark(function t(){var n,s,r;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this,n={appid:"__UNI__8601E36",version:this.version},t.next=4,o.default.post("/mobile/check/app/version/",n);case 4:s=t.sent,e("log",s.data,this.version," at pages\\index\\index.vue:273"),""!==this.version&&s.data.max_version>this.version&&(3!=plus.networkinfo.getCurrentType()?a.showModal({title:"新版本更新",content:"有新的版本发布，检测到您目前非Wifi连接，为节约您的流量，程序已停止自动更新，将在您连接WIFI之后重新检测更新。",confirmText:"立即更新",cancelText:"稍后进行",success:function(t){t.confirm?e("log","用户点击确定"," at pages\\index\\index.vue:283"):t.cancel&&e("log","用户点击取消"," at pages\\index\\index.vue:285")}}):(r=plus.downloader.createDownload("http://47.94.106.106:8000/mobile/download/apk",{},function(e,t){200==t?plus.runtime.install(plus.io.convertLocalFileSystemURL(e.filename),{},{},function(e){a.showToast({title:"安装失败",mask:!1,duration:1500})}):a.showToast({title:"更新失败",mask:!1,duration:1500})}),a.showModal({title:"发现新版本",content:"新版更新内容:有新的版本发布，检测到您目前为Wifi连接，程序已启动自动更新。新版本下载完成后将自动弹出安装程序。",confirmText:"立即更新",cancelText:"稍后进行",success:function(t){t.confirm?(e("log","用户点击确定"," at pages\\index\\index.vue:315"),r.start()):t.cancel&&e("log","用户点击取消"," at pages\\index\\index.vue:318")}})));case 7:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),checkVersionClick:function(){var t=this;plus.runtime.getProperty(plus.runtime.appid,function(n){e("log",n," at pages\\index\\index.vue:332");var i=a.getSystemInfoSync().platform;a.request({url:"https://www.cheshangji.cn/csj-web/app/check/"+i,data:{version:n.version,name:n.name},success:function(n){e("log",n," at pages\\index\\index.vue:343"),200==n.data.status&&n.data.data.update&&(""!=n.data.data.pkgUrl&&""==n.data.data.wgtUrl?(t.upgradeType="pkg",t.upgradeContent=n.data.data.content,t.upgradeUrl=n.data.data.pkgUrl,t.$refs.yomolUpgrade.show()):(t.upgradeType="wgt",t.upgradeContent=n.data.data.content,t.upgradeUrl=n.data.data.wgtUrl,t.$refs.yomolUpgrade.show()))},fail:function(t){e("log",t," at pages\\index\\index.vue:363")}})})},getDate:function(){var t=u(i.default.mark(function t(){var n,a,s=arguments;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=s.length>0&&void 0!==s[0]?s[0]:"add",s.length>1?s[1]:void 0,"add"!==n){t.next=8;break}if("nomore"!==this.loadingType){t.next=5;break}return t.abrupt("return");case 5:this.loadingType="loading",t.next=9;break;case 8:this.loadingType="more";case 9:return t.prev=9,t.next=12,o.default.get("/skus/search/?text=&page="+this.page+"&page_size="+this.page_size);case 12:a=t.sent,this.skus=a.data.results,0===this.skus.length&&(this.loadingType="nomore"),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](9),e("error",t.t0," at pages\\index\\index.vue:386");case 20:case"end":return t.stop()}},t,this,[[9,17]])}));function n(){return t.apply(this,arguments)}return n}(),loadData:function(){var e=u(i.default.mark(function e(){var t,n,a,s,r,u,d,c,l,g,p,f,h,v;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.json("homePageList");case 2:return t=e.sent,this.homePageList=t,e.next=6,o.default.get("/goods/limit/time/sku/");case 6:if(n=e.sent,200!==n.status){e.next=36;break}if(a=new Date,s=a.getFullYear(),r=a.getMonth()+1,u=a.getDate()<10?"0"+a.getDate():a.getDate(),d=a.getHours()<10?"0"+a.getHours():a.getHours(),c=a.getMinutes(),l=a.getSeconds(),g=s+"-"+r+"-"+u+" "+d,n.data.active.start_time!==g){e.next=27;break}return e.next=19,o.default.get("/goods/limit/time/sku/");case 19:p=e.sent,this.goodList=p.data.active.data,this.load=!1,this.hour=+p.data.active.start_time.split(" ")[1]-d,this.minute=59-c,this.second=60-l,e.next=36;break;case 27:if(n.data.active.start_time===g){e.next=36;break}return e.next=30,o.default.get("/goods/limit/time/sku/");case 30:f=e.sent,f.data.active.data.length>0?this.goodList=f.data.active.data:this.goodList=f.data.next.data,this.load=!0,this.hour=23-d+ +f.data.next.start_time.split(" ")[1],this.minute=59-c,this.second=60-l;case 36:return e.next=38,this.$api.json("carouselList");case 38:return h=e.sent,this.titleNViewBackground=h[0].background,this.swiperLength=h.length,this.carouselList=h,e.next=44,o.default.get("/categories/74/skus/?page="+this.page+"&page_size="+this.page_size+"&ordering="+this.ordering);case 44:v=e.sent,this.goodsList=v.data.results;case 46:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),swiperChange:function(e){var t=e.detail.current;this.swiperCurrent=t,this.titleNViewBackground=this.carouselList[t].background},into:function(t){e("log",t," at pages\\index\\index.vue:446"),0===t&&a.navigateTo({url:"/pages/product/list?tid=724"})},toCategory:function(){a.switchTab({url:"/pages/category/category"})},goIcon:function(t){e("log",t.index," at pages\\index\\index.vue:460"),0===t.index?a.navigateTo({url:"/pages/index/subject/zfcg/zfcg"}):1===t.index?this.$api.msg("暂未开发"):2===t.index?a.navigateTo({url:"/pages/index/subject/hzhb/hzhb"}):3===t.index?a.navigateTo({url:"/pages/index/subject/lpdz/lpdz"}):4===t.index?a.navigateTo({url:"/pages/index/subject/wxfw/wxfw"}):5===t.index?a.navigateTo({url:"/pages/index/subject/cjcg/cjcg"}):6===t.index?a.navigateTo({url:"/pages/index/subject/gyhf/gyhf"}):7===t.index?a.navigateTo({url:"/pages/index/subject/zprc/zprc"}):8===t.index?this.$api.msg("暂未开发"):9===t.index&&this.$api.msg("暂未开发")},navToDetailPage:function(t,n){if(e("log",t,n," at pages\\index\\index.vue:512"),void 0===t.object){var i=t.id;a.navigateTo({url:"/pages/product/product?id="+i+"&value="+n})}else{var o=t.object.id;a.navigateTo({url:"/pages/product/product?id="+o+"&value="+n})}}},onNavigationBarSearchInputClicked:function(e){a.switchTab({url:"/pages/search/search"})},onNavigationBarButtonTap:function(t){var n=t.index;if(0===n)a.scanCode({success:function(t){e("log",t," at pages\\index\\index.vue:546"),e("log","条码类型："+t.scanType," at pages\\index\\index.vue:547"),e("log","条码内容："+t.result," at pages\\index\\index.vue:548"),"http"===t.result.split("://")[0]||"https"===t.result.split("://")[0]||"HTTPS"===t.result.split("://")[0]||"wxp"===t.result.split("://")[0]||"www"===t.result.split(".")[0]?plus.runtime.openWeb(t.result,function(n){e("log",t.result," at pages\\index\\index.vue:553")}):(e("log",t.result," at pages\\index\\index.vue:556"),a.navigateTo({url:"/pages/index/code?value="+t.result}))}});else if(1===n){var i=getCurrentPages(),o=i[i.length-1],s=o.$getAppWebview();s.hideTitleNViewButtonRedDot({index:n}),a.navigateTo({url:"/pages/notice/notice"})}}};t.default=g}).call(this,n("0de9")["default"],n("6e42")["default"])},b596:function(e,t,n){"use strict";var a=n("1434"),i=n.n(a);i.a},c6df:function(e,t,n){"use strict";var a={"uni-countdown":()=>n.e("components/uni-countdown/uni-countdown").then(n.bind(null,"c904")),"uni-load-more":()=>n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"e0f5")),"yomol-upgrade":()=>n.e("components/yomol-upgrade/yomol-upgrade").then(n.bind(null,"d6f8"))},i=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return a})}},[["306d","common/runtime","common/vendor"]]]);