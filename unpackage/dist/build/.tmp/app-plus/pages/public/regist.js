(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/public/regist"],{"04f2":function(e,t,a){},4135:function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a("a34a")),n=a("2f62"),u=s(a("2fb7"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a,i,r,n,u){try{var s=e[n](u),o=s.value}catch(c){return void a(c)}s.done?t(o):Promise.resolve(o).then(i,r)}function c(e){return function(){var t=this,a=arguments;return new Promise(function(i,r){var n=e.apply(t,a);function u(e){o(n,i,r,u,s,"next",e)}function s(e){o(n,i,r,u,s,"throw",e)}u(void 0)})}}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),i.forEach(function(t){g(e,t,a[t])})}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f={data:function(){return{username:"",mobile:"",password:"",password2:"",imageCode:"",allow:"true",image_code_id:"",image_code_url:"",getText:""}},onLoad:function(t){e("log",t," at pages\\public\\regist.vue:114"),this.generate_image_code()},methods:l({},(0,n.mapMutations)(["login"]),{toService:function(){i.navigateTo({url:"/pages/set/service"})},toPrivacy:function(){i.navigateTo({url:"/pages/set/privacy"})},toLogin:function(){i.navigateTo({url:"/pages/public/login"})},inputChange:function(e){var t=e.currentTarget.dataset.key;this[t]=e.detail.value},navBack:function(){i.navigateBack()},changeType:function(){this.checked=!this.checked,e("log",this.checked," at pages\\public\\regist.vue:150")},generate_image_code:function(){var t=c(r.default.mark(function t(){var a=this;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i.setStorage({key:"flag",data:"1"}),this.image_code_id=this.generate_uuid(),e("log",this.image_code_id," at pages\\public\\regist.vue:163"),u.default.post("/image_codes/text/"+this.image_code_id).then(function(t){e("log",t.data," at pages\\public\\regist.vue:166"),void 0!==t.data.text&&(a.getText=t.data.text.toLowerCase())}).catch(function(t){e("log",t," at pages\\public\\regist.vue:171")}),this.image_code_url="http://47.94.106.106:8000/image_codes/"+this.image_code_id+"/",e("log",this.image_code_url," at pages\\public\\regist.vue:176");case 6:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),generate_uuid:function(){var t=(new Date).getTime();t+=Date.now(),e("log",t," at pages\\public\\regist.vue:190");var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?a:3&a|8).toString(16)});return a},toRegist:function(){var t=c(r.default.mark(function t(){var a,n=this;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e("log",this.allow," at pages\\public\\regist.vue:202"),this.username){t.next=6;break}return this.$api.msg("请输入用户名"),t.abrupt("return");case 6:u.default.get("/usernames/"+this.username+"/count/").then(function(e){e.data.count>0&&n.$api.msg("用户名已存在")});case 7:if(this.mobile){t.next=12;break}return this.$api.msg("请输入手机号"),t.abrupt("return");case 12:11!==this.mobile.length&&this.$api.msg("手机号格式错误"),u.default.get("/mobiles/"+this.mobile+"/count/").then(function(e){e.data.count>0&&n.$api.msg("手机号已存在")});case 14:if(this.password){t.next=19;break}return this.$api.msg("请输入密码"),t.abrupt("return");case 19:if(!(this.password.length<8)){t.next=22;break}return this.$api.msg("密码不能少于8位"),t.abrupt("return");case 22:if(this.password2){t.next=27;break}return this.$api.msg("请输入确认密码"),t.abrupt("return");case 27:if(!(this.password2.length<8)){t.next=32;break}return this.$api.msg("确认密码不能少于8位"),t.abrupt("return");case 32:if(this.password2===this.password){t.next=35;break}return this.$api.msg("两次密码输入不一致"),t.abrupt("return");case 35:if(e("log",this.imageCode,this.getText," at pages\\public\\regist.vue:254"),this.imageCode){t.next=41;break}return this.$api.msg("请输入验证码"),t.abrupt("return");case 41:if(this.imageCode.toLowerCase()===this.getText){t.next=44;break}return this.$api.msg("验证码错误"),t.abrupt("return");case 44:if("true"===this.allow){t.next=47;break}return this.$api.msg("请同意用户协议"),t.abrupt("return");case 47:a={username:this.username,mobile:this.mobile,password:this.password,password2:this.password2,imageCode:this.imageCode,allow:this.allow},u.default.post("/users/",a).then(function(t){e("log",t," at pages\\public\\regist.vue:277"),201===t.status&&(n.login(t.data),i.switchTab({url:"/pages/user/user"}))}).catch(function(t){e("log",t," at pages\\public\\regist.vue:285"),n.$api.msg(t.data.mobile)});case 49:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()})};t.default=f}).call(this,a("0de9")["default"],a("6e42")["default"])},"4ac8":function(e,t,a){"use strict";a.r(t);var i=a("4dda"),r=a("b94b");for(var n in r)"default"!==n&&function(e){a.d(t,e,function(){return r[e]})}(n);a("6181");var u,s=a("f0c5"),o=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],u);t["default"]=o.exports},"4dda":function(e,t,a){"use strict";var i,r=function(){var e=this,t=e.$createElement;e._self._c},n=[];a.d(t,"b",function(){return r}),a.d(t,"c",function(){return n}),a.d(t,"a",function(){return i})},6181:function(e,t,a){"use strict";var i=a("04f2"),r=a.n(i);r.a},b94b:function(e,t,a){"use strict";a.r(t);var i=a("4135"),r=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);t["default"]=r.a},d032:function(e,t,a){"use strict";(function(e){a("a8bd"),a("921b");i(a("66fd"));var t=i(a("4ac8"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])}},[["d032","common/runtime","common/vendor"]]]);