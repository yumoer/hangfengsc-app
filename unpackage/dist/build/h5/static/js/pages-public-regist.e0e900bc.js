(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-public-regist"],{"14d5":function(e,t,i){"use strict";i.r(t);var s=i("9ece"),a=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);t["default"]=a.a},3533:function(e,t,i){"use strict";i.r(t);var s=i("7b5e"),a=i("14d5");for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("7902");var o,r=i("f0c5"),d=Object(r["a"])(a["default"],s["b"],s["c"],!1,null,"1b20e371",null,!1,s["a"],o);t["default"]=d.exports},7902:function(e,t,i){"use strict";var s=i("a870"),a=i.n(s);a.a},"7b5e":function(e,t,i){"use strict";var s;i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return s}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"header"},[i("v-uni-view",{staticClass:"back-btn-left yticon icon-zuojt-login",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.navBack.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"wrapper"},[i("v-uni-view",{staticClass:"aside"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"msg"},[i("v-uni-text",{staticClass:"text"},[e._v("新用户注册")]),i("br")],1)],1),e.first?i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"input-content"},[i("v-uni-view",{staticClass:"first"},[i("v-uni-view",{staticClass:"input-item"},[i("v-uni-input",{attrs:{value:e.mobile,placeholder:"请输入手机号",maxlength:"11",type:"number","data-key":"mobile"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputChange.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"errorMsg"},[e.mobile?i("v-uni-text",{staticClass:"message"},[e._v(e._s(e.mobileMsg))]):e._e()],1),i("v-uni-view",{staticClass:"input-item",staticStyle:{position:"relative"}},[i("v-uni-input",{attrs:{value:e.imageCode,placeholder:"请输入图形验证码",maxlength:"4","data-key":"imageCode"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputChange.apply(void 0,arguments)}}}),i("v-uni-view",{staticStyle:{position:"absolute",right:"10px",top:"14upx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.generate_image_code.apply(void 0,arguments)}}},[i("v-uni-image",{staticStyle:{width:"100px",height:"35px"},attrs:{src:e.image_code_url,mode:""}})],1)],1),i("v-uni-view",{staticClass:"errorMsg"},[e.imageCode?i("v-uni-text",{staticClass:"message"},[e._v(e._s(e.imageCodeMsg))]):e._e()],1),i("v-uni-view",{staticClass:"input-item",staticStyle:{position:"relative"}},[i("v-uni-input",{attrs:{value:e.sms_code,placeholder:"请输入手机验证码",maxlength:"6",type:"number","data-key":"sms_code"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputChange.apply(void 0,arguments)}}}),e.send?i("v-uni-view",{staticStyle:{position:"absolute",right:"0"}},[i("v-uni-text",{staticStyle:{color:"#999","font-size":"12px",padding:"0 20px","border-left":"1px solid #999"},attrs:{type:"text"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.mobileCode.apply(void 0,arguments)}}},[e._v("获取验证码")])],1):e._e(),e.send?e._e():i("v-uni-view",{staticStyle:{position:"absolute",right:"0"}},[i("v-uni-text",{staticStyle:{color:"#999","font-size":"12px",height:"30px","line-height":"30px"},attrs:{type:"text"}},[e._v(e._s(e.time)+"s后重新获取")])],1)],1),i("v-uni-view",{staticClass:"errorMsg"},[e.sms_code?i("v-uni-text",{staticClass:"message"},[e._v(e._s(e.smsCodeMsg))]):e._e()],1)],1),i("v-uni-view",{staticClass:"loginBtn"},[i("v-uni-button",{staticClass:"confirm-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toNext.apply(void 0,arguments)}}},[e._v("下一步")])],1)],1)],1):i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"input-content"},[i("v-uni-view",{staticClass:"second"},[i("v-uni-view",{staticClass:"input-item"},[i("v-uni-input",{attrs:{value:e.username,placeholder:"请输入用户名",maxlength:"20","data-key":"username"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputChange.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"errorMsg"},[e.username?i("v-uni-text",{staticClass:"message"},[e._v(e._s(e.usernameMsg))]):e._e()],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-input",{attrs:{type:"password",value:e.password,placeholder:"请输入密码",maxlength:"20",password:!0,"data-key":"password"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputChange.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"errorMsg"},[e.password?i("v-uni-text",{staticClass:"message"},[e._v(e._s(e.passwordMsg))]):e._e()],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-input",{attrs:{type:"password",value:e.password2,placeholder:"请再次输入密码",maxlength:"20",password:!0,"data-key":"password2"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputChange.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"errorMsg"},[e.password2?i("v-uni-text",{staticClass:"message"},[e._v(e._s(e.passwordMsg2))]):e._e()],1)],1),i("v-uni-view",{staticClass:"info"},[i("v-uni-checkbox-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeType.apply(void 0,arguments)}}},[i("v-uni-label",[i("v-uni-checkbox",{attrs:{checked:e.allow,color:"#EE1D23"}}),i("v-uni-text",{staticStyle:{"font-size":"12px"}},[e._v("同意《行丰用户服务协议》《行丰隐私保护政策》")])],1)],1)],1),i("v-uni-view",{staticClass:"loginBtn"},[i("v-uni-button",{staticClass:"confirm-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toRegist.apply(void 0,arguments)}}},[e._v("注册")]),i("v-uni-button",{staticClass:"confirm",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toPrev.apply(void 0,arguments)}}},[e._v("上一步")])],1)],1)],1)],1)],1)],1)},n=[]},"9ece":function(e,t,i){"use strict";(function(e){var s=i("4ea4");i("d3b7"),i("ac1f"),i("25f0"),i("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var a=s(i("1da1")),n=s(i("5530")),o=i("2f62"),r=s(i("919f")),d={data:function(){return{username:"",usernameMsg:"",mobile:"",mobileMsg:"",password:"",passwordMsg:"",password2:"",passwordMsg2:"",imageCode:"",imageCodeMsg:"",sms_code:"",smsCodeMsg:"",allow:!1,image_code_id:"",image_code_url:"",getText:"",send:!0,time:60,first:!0,value:""}},onLoad:function(e){!0===this.first&&this.generate_image_code()},methods:(0,n.default)((0,n.default)({},(0,o.mapMutations)(["login"])),{},{toService:function(){uni.navigateTo({url:"/pages/set/service"})},toPrivacy:function(){uni.navigateTo({url:"/pages/set/privacy"})},toLogin:function(){uni.navigateTo({url:"/pages/public/login"})},toNext:function(){this.mobile&&this.imageCode&&this.sms_code?this.mobileMsg||this.imageCodeMsg||this.smsCodeMsg?this.mobileMsg?this.$api.msg(this.mobileMsg):this.imageCodeMsg?this.$api.msg(this.imageCodeMsg):this.smsCodeMsg&&this.$api.msg(this.smsCodeMsg):this.first=!1:this.$api.msg("请填写注册信息")},toPrev:function(){this.first=!0},inputChange:function(e){var t=this,i=e.currentTarget.dataset.key;switch(i){case"mobile":if(this.mobile=e.detail.value,!this.mobile)return void(this.mobileMsg="请输入手机号");11!==this.mobile.length?this.mobileMsg="手机号格式错误":r.default.get("/user/mobiles/"+this.mobile+"/count/").then((function(e){e.data.count>0?t.mobileMsg="手机号已存在":t.mobileMsg=""}));break;case"imageCode":this.imageCode=e.detail.value,this.imageCode?this.imageCode.toLowerCase()!==this.getText?this.imageCodeMsg="验证码错误":this.imageCodeMsg="":this.imageCodeMsg="请输入图形验证码";break;case"sms_code":this.sms_code=e.detail.value,this.sms_code?this.sms_code.toLowerCase()!==this.sms_code?this.smsCodeMsg="手机验证码错误":this.smsCodeMsg="":this.smsCodeMsg="请输入手机验证码";break;case"username":if(this.username=e.detail.value,!this.username)return void(this.usernameMsg="请输入用户名");r.default.get("/user/usernames/"+this.username+"/count/").then((function(e){return e.data.count>0?void(t.usernameMsg="用户名已存在"):void(t.usernameMsg="")}));break;case"password":return this.password=e.detail.value,this.password?this.password.length<8?void(this.passwordMsg="密码不能少于8位"):void(this.passwordMsg=""):void(this.passwordMsg="请输入密码");case"password2":return this.password2=e.detail.value,this.password2?this.password2.length<8?void(this.passwordMsg2="确认密码不能少于8位"):this.password2!==this.password?void(this.passwordMsg2="两次密码输入不一致"):void(this.passwordMsg2=""):void(this.passwordMsg2="请输入确认密码")}},navBack:function(){uni.navigateBack()},changeType:function(t){e("log",t," at pages/public/regist.vue:324"),this.allow=!this.allow,e("log",this.allow," at pages/public/regist.vue:326")},mobileCode:function(){var t=this;this.mobile&&this.imageCode?this.mobileMsg||this.imageCodeMsg?this.mobileMsg?this.$api.msg(this.mobileMsg):this.imageCodeMsg&&this.$api.msg(this.imageCodeMsg):r.default.get("/verify/sms_codes/"+this.mobile+"/?text="+this.getText+"&image_code_id="+this.image_code_id).then((function(e){if(200===e.status)var i=setInterval((function(){t.send=!1,t.time-=1,t.time<1&&(clearInterval(i),t.send=!0)}),1e3);else 400===e.status&&(t.$api.msg(e.data.non_field_errors[0]),"无效验证码"===e.data.non_field_errors[0]&&uni.redirectTo({url:"/pages/public/regist"}))})).catch((function(t){e("log",t," at pages/public/regist.vue:353")})):""===this.mobile?this.$api.msg("请输入手机号"):""===this.imageCode&&this.$api.msg("请输入图形验证码")},generate_image_code:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:uni.setStorage({key:"flag",data:"1"}),t.image_code_id=t.generate_uuid(),e("log",t.image_code_id," at pages/public/regist.vue:377"),t.image_code_url="http://api.hfyt365.com/verify/image_codes/"+t.image_code_id+"/",e("log",t.image_code_url," at pages/public/regist.vue:381"),setTimeout((function(){r.default.get("/verify/image_codes/text/"+t.image_code_id+"/").then((function(i){e("log",i.data," at pages/public/regist.vue:385"),200===i.status?void 0!==i.data.text&&(t.getText=i.data.text.toLowerCase()):t.$api.msg(i.data.message)})).catch((function(t){e("log",t," at pages/public/regist.vue:394")}))}),500);case 6:case"end":return i.stop()}}),i)})))()},generate_uuid:function(){var e=(new Date).getTime();e+=performance.now();var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)}));return t},toRegist:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!(t.username&&t.password&&t.password2)){i.next=12;break}if(t.usernameMsg||t.passwordMsg||t.passwordMsg2){i.next=9;break}if(!0===t.allow){i.next=5;break}return t.$api.msg("请同意用户协议"),i.abrupt("return");case 5:s={username:t.username,mobile:t.mobile,password:t.password,password2:t.password2,imageCode:t.imageCode,sms_code:t.sms_code,allow:t.allow+""},r.default.post("/user/register/",s).then((function(i){e("log",i," at pages/public/regist.vue:439"),201===i.status&&(t.login(i.data),uni.switchTab({url:"/pages/user/user"})),400===i.status&&t.$api.msg(i.data.message)})).catch((function(t){e("log",t," at pages/public/regist.vue:450")})),i.next=10;break;case 9:t.usernameMsg?t.$api.msg(t.usernameMsg):t.passwordMsg?t.$api.msg(t.passwordMsg):t.passwordMsg2&&t.$api.msg(t.passwordMsg2);case 10:i.next=13;break;case 12:t.$api.msg("请填写注册信息");case 13:case"end":return i.stop()}}),i)})))()}})};t.default=d}).call(this,i("0de9")["log"])},a870:function(e,t,i){var s=i("cd2d");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=i("4f06").default;a("58a8353c",s,!0,{sourceMap:!1,shadowMode:!1})},cd2d:function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,'@charset "UTF-8";\n/* uni.scss */\n/* 主题色 */\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 页面左右间距 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 背景颜色 */\n/* 行为相关颜色 */[data-v-1b20e371] uni-radio .uni-radio-input{width:16px;height:16px}[data-v-1b20e371] uni-checkbox .uni-checkbox-input{border-radius:50%}.container[data-v-1b20e371]{position:relative;width:100vw;height:100vh;overflow:hidden;background:#fff}.container .back-btn-left[data-v-1b20e371]{position:absolute;left:%?40?%;z-index:9999;padding-top:0;top:%?40?%;font-size:%?36?%;color:#666}.container .left-top-sign[data-v-1b20e371]{font-size:%?120?%;color:#f8f8f8;position:relative;left:%?-16?%}.wrapper[data-v-1b20e371]{position:relative;z-index:90;padding-bottom:%?40?%;margin-top:%?200?%}.wrapper .aside[data-v-1b20e371]{width:100%;height:100%}.wrapper .aside .content[data-v-1b20e371]{margin:0 auto;width:80%;height:100%}.wrapper .aside .content .msg[data-v-1b20e371]{width:200px;height:70px;line-height:34px}.wrapper .aside .content .msg .text[data-v-1b20e371]{font-size:18px;font-weight:700}.wrapper .aside .input-content[data-v-1b20e371]{width:100%}.wrapper .aside .input-content .errorMsg[data-v-1b20e371]{width:100%;height:%?60?%}.wrapper .aside .input-content .errorMsg .message[data-v-1b20e371]{height:30px;line-height:30px;color:red;font-size:12px;margin-left:%?60?%}.wrapper .aside .input-content .input-item[data-v-1b20e371]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;padding:0 %?60?%;background:#fff;height:%?100?%;border-radius:30px;border:1px solid #e4e7ed}.wrapper .aside .input-content .input-item .tit[data-v-1b20e371]{height:%?50?%;line-height:%?50?%;font-size:%?26?%;color:#dcdfe6}.wrapper .aside .input-content .input-item uni-input[data-v-1b20e371]{height:%?60?%;font-size:%?30?%;color:#303133;width:100%}.wrapper .aside .info[data-v-1b20e371]{width:100%;height:30px}.wrapper .aside .info .allow[data-v-1b20e371]{font-size:12px;height:30px;line-height:30px;color:#999}.wrapper .aside .loginBtn[data-v-1b20e371]{width:100%;height:50px;margin-top:20px}.wrapper .aside .loginBtn .confirm[data-v-1b20e371]{width:100%;height:%?76?%;line-height:%?76?%;border-radius:50px;\n  /* background: $uni-color-primary; */color:#333;background:#fff;border:1px solid #ee1d23;font-size:%?32?%;margin-top:%?20?%}.wrapper .aside .loginBtn .confirm[data-v-1b20e371]:after{border-radius:100px}.wrapper .aside .loginBtn .confirm-btn[data-v-1b20e371]{width:100%;height:%?76?%;line-height:%?76?%;border-radius:50px;color:#fff;background:linear-gradient(90deg,#ee1d23,#f04023);font-size:%?32?%}.wrapper .aside .loginBtn .confirm-btn[data-v-1b20e371]:after{border-radius:100px}',""]),e.exports=t}}]);