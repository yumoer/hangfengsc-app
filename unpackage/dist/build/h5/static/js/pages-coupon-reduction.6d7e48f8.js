(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-coupon-reduction"],{"0f33":function(t,e,a){"use strict";var i=a("f85d"),o=a.n(i);o.a},"109c":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"xw-empty",props:{text:{type:String,default:""},img:{type:String,default:""},textColor:{type:String,default:""},isShow:{type:Boolean,default:!1},btnText:{type:String,default:""},path:{type:String,default:""}},methods:{navTo:function(e){t("log",e," at components/xw-empty/xw-empty.vue:40"),uni.switchTab({url:e}),uni.navigateTo({url:e})}}};e.default=a}).call(this,a("0de9")["log"])},"367e":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isShow?a("v-uni-view",{staticClass:"empty"},[a("v-uni-image",{staticClass:"empty_image",attrs:{src:t.img,mode:"widthFix"}}),a("v-uni-text",{style:{color:t.textColor}},[t._v(t._s(t.text))]),t.path?a("v-uni-button",{staticClass:"add-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo(t.path)}}},[t._v(t._s(t.btnText))]):t._e()],1):t._e()},n=[]},"44ab":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uCheckboxGroup:a("b7fc").default,uCheckbox:a("264e").default,xwEmpty:a("6ae3").default},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[t.goodsList.length>0?a("v-uni-view",{staticClass:"goods-list",style:{"margin-bottom":t.isCheck?"65px":"0"}},[t._l(t.goodsList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"goods-item"},[t.isCheck?a("u-checkbox-group",{staticStyle:{float:"left",height:"105px"}},[a("u-checkbox",{attrs:{name:e.id,"active-color":"red"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.checkboxChange.apply(void 0,arguments)}},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}})],1):t._e(),a("v-uni-view",{staticClass:"image-wrapper",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navToDetailPage(e)}}},[a("v-uni-image",{staticStyle:{float:"left"},attrs:{src:e.sku.default_image_url,mode:"aspectFill"}})],1),a("v-uni-view",{staticClass:"goodsInfo",style:{width:t.isCheck?"330upx":"400upx"}},[a("v-uni-text",{staticClass:"title clamp2",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navToDetailPage(e)}}},[t._v(t._s(e.sku.title))]),a("v-uni-view",{staticClass:"price-box"},[a("v-uni-text",{staticClass:"price"},[t._v(t._s(e.sku.price))])],1),a("v-uni-view",{staticClass:"goodsBox"},[a("v-uni-button",{staticClass:"goodsBtn",attrs:{type:"default"}},[t._v("看相似")]),e.disabled?t._e():a("v-uni-text",{staticClass:"goodsCart",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.joinCart(e)}}},[a("i",{staticClass:"yticon icon-gwc-wei"})])],1)],1)],1)})),t.isCheck?a("v-uni-view",{staticClass:"action-section"},[a("u-checkbox-group",{staticClass:"checkbox"},[a("u-checkbox",{attrs:{"active-color":"red"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.checkedAll.apply(void 0,arguments)}},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1),a("v-uni-view",{staticClass:"total-box"}),a("v-uni-button",{staticClass:"no-border confirm-btn",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toFavorite(t.selected)}}},[t._v("取消收藏 ("+t._s(t.selected.length)+")")])],1):t._e(),a("show-modal")],2):a("v-uni-view",[a("xw-empty",{attrs:{isShow:t.isEmpty,img:"/static/empty/emptyCollect.png",path:"",btnText:"",text:"您还没有添加收藏",textColor:"#C0C4CC"}})],1)],1)},n=[]},"4da6":function(t,e,a){"use strict";a.r(e);var i=a("64bb"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},"4e6c":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* uni.scss */\n/* 主题色 */\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 页面左右间距 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 背景颜色 */\n/* 行为相关颜色 */.empty[data-v-d662ec24]{position:relative;left:0;top:0;width:100%;height:80vh;padding-bottom:%?100?%;display:flex;justify-content:center;flex-direction:column;align-items:center;background:#f7f7f7}.empty .empty_image[data-v-d662ec24]{width:%?517.7?%;height:%?360.425?%;margin-bottom:%?30?%}.empty .empty-tips[data-v-d662ec24]{display:flex;justify-content:center;font-size:%?26?%;color:#c0c4cc}.empty .empty-tips .navigator[data-v-d662ec24]{color:#fa436a;margin-left:%?16?%}.empty .add-btn[data-v-d662ec24]{margin-top:%?40?%;font-size:%?32?%;width:%?234?%;color:#ee1d23;background-color:#fa436a;border-radius:%?50?%;background:#fff;box-shadow:1px 2px 5px rgba(219,63,96,.4);letter-spacing:%?6?%}',""]),t.exports=e},"5d11":function(t,e,a){var i=a("4e6c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("1379280d",i,!0,{sourceMap:!1,shadowMode:!1})},6177:function(t,e,a){"use strict";var i=a("5d11"),o=a.n(i);o.a},"64bb":function(t,e,a){"use strict";(function(t){var i=a("4ea4");a("99af"),a("4160"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var o=i(a("1da1")),n=i(a("919f")),c=i(a("6ae3")),s={data:function(){return{goodsList:[],selected:[],cartList:[],couponId:0,favorite:!0,isEmpty:!1,checked:!1,isCheck:!1}},components:{xwEmpty:c.default},onLoad:function(t){this.ifFavorite(),this.getCartList()},activated:function(){this.ifFavorite(),this.getCartList()},onNavigationBarButtonTap:function(t){var e=t.index;0===e&&this.goodsList.length>0?(!0===this.isCheck?document.getElementsByClassName("uni-btn-icon")[1].innerText="编辑":document.getElementsByClassName("uni-btn-icon")[1].innerText="完成",this.isCheck=!this.isCheck,this.selected=[],this.goodsList.forEach((function(t){t.checked=!1}))):this.$api.msg("没有数据暂不能编辑")},watch:{goodsList:function(t){var e=0===t.length;this.isEmpty!==e&&(this.isEmpty=e)}},methods:{navToDetailPage:function(e){t("log",e," at pages/coupon/reduction.vue:102");var a=e.sku.id,i=e.id;t("log",a," at pages/coupon/reduction.vue:105"),uni.navigateTo({url:"/pages/product/product?id=".concat(a,"&value=undefined&skuId=").concat(i)})},getCartList:function(){var e=this;(0,n.default)({url:"/carts/cart_sku/",method:"get",headers:{Authorization:"JWT "+uni.getStorageSync("userInfo").token}}).then((function(t){200===t.status||201===t.status?(e.cartList=t.data,e.isCheck&&e.cartList.length>0?document.getElementsByClassName("uni-btn-icon")[1].innerText="完成":document.getElementsByClassName("uni-btn-icon")[1].innerText="编辑"):500===t.status&&e.$api.msg("服务器错误，请稍后重试")})).catch((function(e){t("log","222",e," at pages/coupon/reduction.vue:133")}))},ifFavorite:function(){var e=this;uni.showLoading(),(0,n.default)({url:"/carts/collection/",method:"GET",params:{page:1,page_size:10},headers:{Authorization:"JWT "+uni.getStorageSync("userInfo").token}}).then((function(t){200===t.status&&(uni.hideLoading(),t.data.results.forEach((function(t){t.checked=!1,t.disabled=!1})),e.goodsList=t.data.results,e.goodsList.forEach((function(t){e.cartList.forEach((function(e){t.sku.id===e.id&&(t.disabled=!0)}))})))})).catch((function(e){t("log",e," at pages/coupon/reduction.vue:163")}))},toFavorite:function(e){var a=this;e.forEach((function(e){uni.showLoading(),(0,n.default)({url:"/carts/collection/"+e.name+"/",method:"DELETE",headers:{Authorization:"JWT "+uni.getStorageSync("userInfo").token}}).then((function(e){t("log",e,e.data.results," at pages/coupon/reduction.vue:178"),204===e.status&&(a.favorite=!1,a.isCheck=!1,a.ifFavorite(),setTimeout((function(){uni.hideLoading(),a.$api.msg("取消收藏成功"),a.getCartList()}),500))})).catch((function(e){t("log",e," at pages/coupon/reduction.vue:190")}))}))},checkboxChange:function(e){var a=this;!0===e.value?this.selected.push(e):(this.checked=!1,this.selected.shift(e,1)),t("log",this.selected," at pages/coupon/reduction.vue:204"),this.selected.forEach((function(e){t("log",e.value," at pages/coupon/reduction.vue:206"),!0===e.value&&a.goodsList.length===a.selected.length&&(a.checked=!0)})),e.value=!e.value},checkedAll:function(){var e=this,a=[];this.goodsList.forEach((function(t){!0===e.checked?t.checked=!0:t.checked=!1,a.push({value:t.checked,name:t.id})})),this.selected=a,t("log",this.selected," at pages/coupon/reduction.vue:227")},joinCart:function(e){var a=this;t("log",e," at pages/coupon/reduction.vue:231"),this.$showModal({title:"提示",content:"是否确认加入购物车?",cancelText:"取消",confirmText:"确认",success:function(){var i=(0,o.default)(regeneratorRuntime.mark((function i(o){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:o.confirm&&(0,n.default)({url:"/carts/cart_sku/",method:"POST",data:{count:1,sku_id:e.sku.id},headers:{Authorization:"JWT "+uni.getStorageSync("userInfo").token}}).then((function(e){t("log",e,e.data.results," at pages/coupon/reduction.vue:250"),201===e.status&&(a.isCheck=!1,a.ifFavorite(),a.getCartList(),setTimeout((function(){a.$api.msg("加入购物车成功")}),500))})).catch((function(e){t("log",e," at pages/coupon/reduction.vue:260")}));case 1:case"end":return i.stop()}}),i)})));function c(t){return i.apply(this,arguments)}return c}()})}}};e.default=s}).call(this,a("0de9")["log"])},"68a5":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* uni.scss */\n/* 主题色 */\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 页面左右间距 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 背景颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-2c93d7b2], .content[data-v-2c93d7b2]{background:#f8f8f8}.navbar[data-v-2c93d7b2]{position:fixed;left:0;top:var(--window-top);display:flex;width:100%;height:%?80?%;background:#fff;box-shadow:0 %?2?% %?10?% rgba(0,0,0,.06);z-index:10}.navbar .nav-item[data-v-2c93d7b2]{flex:1;display:flex;justify-content:center;align-items:center;height:100%;font-size:%?30?%;color:#303133;position:relative}.navbar .nav-item.current[data-v-2c93d7b2]{color:#fa436a}.navbar .nav-item.current[data-v-2c93d7b2]:after{content:"";position:absolute;left:50%;bottom:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:%?120?%;height:0;border-bottom:%?4?% solid #fa436a}.navbar .p-box[data-v-2c93d7b2]{display:flex;flex-direction:column}.navbar .p-box .yticon[data-v-2c93d7b2]{display:flex;align-items:center;justify-content:center;width:%?30?%;height:%?14?%;line-height:1;margin-left:%?4?%;font-size:%?26?%;color:#888}.navbar .p-box .yticon.active[data-v-2c93d7b2]{color:#fa436a}.navbar .p-box .xia[data-v-2c93d7b2]{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.navbar .cate-item[data-v-2c93d7b2]{display:flex;justify-content:center;align-items:center;height:100%;width:%?80?%;position:relative;font-size:%?44?%}.navbar .cate-item[data-v-2c93d7b2]:after{content:"";position:absolute;left:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);border-left:1px solid #ddd;width:0;height:%?36?%}\n/* 分类 */.cate-mask[data-v-2c93d7b2]{position:fixed;left:0;top:var(--window-top);bottom:0;width:100%;background:transparent;z-index:95;transition:.3s}.cate-mask .cate-content[data-v-2c93d7b2]{width:%?630?%;height:100%;background:#fff;float:right;-webkit-transform:translateX(100%);transform:translateX(100%);transition:.3s}.cate-mask.none[data-v-2c93d7b2]{display:none}.cate-mask.show[data-v-2c93d7b2]{background:rgba(0,0,0,.4)}.cate-mask.show .cate-content[data-v-2c93d7b2]{-webkit-transform:translateX(0);transform:translateX(0)}.cate-list[data-v-2c93d7b2]{display:flex;flex-direction:column;height:100%}.cate-list .cate-item[data-v-2c93d7b2]{display:flex;align-items:center;height:%?90?%;padding-left:%?30?%;font-size:%?28?%;color:#555;position:relative}.cate-list .two[data-v-2c93d7b2]{height:%?64?%;color:#303133;font-size:%?30?%;background:#f8f8f8}.cate-list .active[data-v-2c93d7b2]{color:#fa436a}\n/* 商品列表 */.goods-list[data-v-2c93d7b2]{display:flex;flex-wrap:wrap;padding:%?30?%}.goods-list .goods-item[data-v-2c93d7b2]{display:flex;flex-direction:column;width:100%;padding:%?30?%;margin-top:%?30?%;border-radius:%?20?%;background-color:#fff;display:inline-block}.goods-list .goods-item[data-v-2c93d7b2]:nth-child(1){margin-top:0}.goods-list .image-wrapper[data-v-2c93d7b2]{width:%?200?%;height:%?200?%;border-radius:3px;overflow:hidden;float:left}.goods-list .image-wrapper uni-image[data-v-2c93d7b2]{width:100%;height:100%;opacity:1}.goods-list .goodsInfo[data-v-2c93d7b2]{float:left;display:inline-block;margin-left:%?30?%}.goods-list .goodsInfo .goodsBtn[data-v-2c93d7b2]{width:%?156?%;font-size:%?28?%;float:left;margin-top:%?20?%;color:red;background-color:#fff;border-radius:%?40?%;border:1px solid red;height:%?60?%;line-height:%?60?%}.goods-list .goodsInfo .goodsCart[data-v-2c93d7b2]{color:red;float:right;display:block;font-size:%?60?%}.goods-list .icon-gwc-wei[data-v-2c93d7b2]{font-size:%?54?%}.goods-list .title[data-v-2c93d7b2]{float:right;font-size:%?28?%;height:%?80?%;color:#303133;overflow:hidden}.goods-list .price-box[data-v-2c93d7b2]{display:flex;align-items:center;justify-content:space-between;padding-right:%?10?%;font-size:%?24?%;color:#909399}.goods-list .price[data-v-2c93d7b2]{font-size:%?32?%;color:#fa436a;line-height:1;margin-top:%?20?%}.goods-list .price[data-v-2c93d7b2]:before{content:"￥";font-size:%?26?%}.goods-list .p-b-btn[data-v-2c93d7b2]{display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:%?24?%;color:#606266;width:%?96?%;height:%?80?%}.goods-list .p-b-btn .yticon[data-v-2c93d7b2]{font-size:%?40?%;line-height:%?48?%;color:#909399}.goods-list .p-b-btn.active[data-v-2c93d7b2], .goods-list .p-b-btn.active .yticon[data-v-2c93d7b2]{color:#fa436a}.goods-list .p-b-btn .icon-fenxiang2[data-v-2c93d7b2]{font-size:%?42?%;-webkit-transform:translateY(%?-2?%);transform:translateY(%?-2?%)}.goods-list .p-b-btn .icon-shoucang[data-v-2c93d7b2]{font-size:%?46?%}\n/* 底部栏 */.action-section[data-v-2c93d7b2]{position:fixed;bottom:1px;margin-left:-15px;z-index:95;display:flex;align-items:center;width:100%;height:%?100?%;padding-left:%?30?%;background:#fff;box-shadow:0 0 2px 0 rgba(0,0,0,.5)}.action-section .checkbox[data-v-2c93d7b2]{height:%?52?%;position:relative}.action-section .checkbox uni-image[data-v-2c93d7b2]{width:%?45?%;height:100%;position:relative;z-index:5}.action-section .allText[data-v-2c93d7b2]{position:absolute;left:%?80?%;top:0;z-index:4;width:%?80?%;height:%?52?%;line-height:%?52?%;font-size:16px;color:#666}.action-section .clear-btn[data-v-2c93d7b2]{position:absolute;left:%?26?%;top:0;z-index:4;width:0;height:%?52?%;line-height:%?52?%;padding-left:%?38?%;font-size:%?28?%;color:#fff;background:#c0c4cc;border-radius:0 50px 50px 0;opacity:0;transition:.2s}.action-section .clear-btn.show[data-v-2c93d7b2]{opacity:1;width:%?120?%}.action-section .total-box[data-v-2c93d7b2]{flex:1;display:flex;flex-direction:column;text-align:right;padding-right:%?40?%}.action-section .total-box .price[data-v-2c93d7b2]{font-size:%?32?%;color:#303133}.action-section .total-box .coupon[data-v-2c93d7b2]{font-size:%?24?%;color:#909399}.action-section .total-box .coupon uni-text[data-v-2c93d7b2]{color:#303133}.action-section .confirm-btn[data-v-2c93d7b2]{padding:0 %?40?%;height:%?80?%;line-height:%?80?%;margin-right:%?30?%;font-size:%?30?%;background:#ee1d23;border-radius:%?60?%;box-shadow:1px 2px 5px rgba(217,60,93,.72)}\n/* 复选框选中状态 */.action-section .checkbox.checked[data-v-2c93d7b2],\n.cart-item .checkbox.checked[data-v-2c93d7b2]{color:#ee1d23;font-size:20px}body.?%PAGE?%[data-v-2c93d7b2]{background:#f8f8f8}',""]),t.exports=e},"6ae3":function(t,e,a){"use strict";a.r(e);var i=a("367e"),o=a("d8ae");for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("6177");var c,s=a("f0c5"),d=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"d662ec24",null,!1,i["a"],c);e["default"]=d.exports},d8ae:function(t,e,a){"use strict";a.r(e);var i=a("109c"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},dfce:function(t,e,a){"use strict";a.r(e);var i=a("44ab"),o=a("4da6");for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("0f33");var c,s=a("f0c5"),d=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"2c93d7b2",null,!1,i["a"],c);e["default"]=d.exports},f85d:function(t,e,a){var i=a("68a5");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("e95b9518",i,!0,{sourceMap:!1,shadowMode:!1})}}]);