(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-set-userInfo"],{"0653":function(t,e,a){"use strict";a.r(e);var n=a("9d413"),i=a("3163");for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("40f6");var r,o=a("f0c5"),u=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"46b206d2",null,!1,n["a"],r);e["default"]=u.exports},"16c0":function(t,e,a){var n=a("59ab");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("329b67aa",n,!0,{sourceMap:!1,shadowMode:!1})},3163:function(t,e,a){"use strict";a.r(e);var n=a("c04b"),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"40f6":function(t,e,a){"use strict";var n=a("16c0"),i=a.n(n);i.a},"59ab":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* uni.scss */\n/* 主题色 */\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 页面左右间距 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 背景颜色 */\n/* 行为相关颜色 */.content[data-v-46b206d2]{padding:%?30?%}.wrap[data-v-46b206d2]{width:100%;height:%?330?%;background:#fff;border-radius:%?20?%}.row[data-v-46b206d2]{display:flex;align-items:center;position:relative;padding:0 %?30?%;height:%?110?%}.row .tit[data-v-46b206d2]{flex-shrink:0;width:%?160?%;font-size:%?30?%;color:#303133}.row .input[data-v-46b206d2]{flex:1;font-size:%?30?%;color:#303133}.row .icon-shouhuodizhi[data-v-46b206d2]{font-size:%?36?%;color:#909399}.default-row[data-v-46b206d2]{margin-top:%?16?%}.default-row .tit[data-v-46b206d2]{flex:1}.default-row uni-switch[data-v-46b206d2]{-webkit-transform:translateX(%?16?%) scale(.9);transform:translateX(%?16?%) scale(.9)}.add-btn[data-v-46b206d2]{display:flex;align-items:center;justify-content:center;width:%?590?%;height:%?80?%;margin:%?60?% auto;font-size:%?32?%;letter-spacing:%?6?%;border-radius:%?40?%;color:#fff;background:linear-gradient(90deg,#ee1d23 0,#f04023);box-shadow:1px 0 5px rgba(238,29,35,.3)}.del-btn[data-v-46b206d2]{display:flex;align-items:center;justify-content:center;margin-left:%?20?%;width:%?160?%;height:%?80?%;border-radius:%?40?%;background:linear-gradient(90deg,#ee1d23 0,#f04023);color:#fff;font-size:%?32?%;box-shadow:1px 2px 5px rgba(219,63,96,.4)}.u-default-hover[data-v-46b206d2]{color:hsla(0,0%,100%,.6)!important}',""]),t.exports=e},"9d413":function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticClass:"row b-b"},[a("v-uni-text",{staticClass:"tit"},[t._v("用户名")]),a("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入用户名","placeholder-class":"placeholder"},model:{value:t.userInfo.username,callback:function(e){t.$set(t.userInfo,"username",e)},expression:"userInfo.username"}})],1),a("v-uni-view",{staticClass:"row b-b"},[a("v-uni-text",{staticClass:"tit"},[t._v("手机号")]),a("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:"请输入手机号码","placeholder-class":"placeholder"},model:{value:t.userInfo.mobile,callback:function(e){t.$set(t.userInfo,"mobile",e)},expression:"userInfo.mobile"}})],1),a("v-uni-view",{staticClass:"row"},[a("v-uni-text",{staticClass:"tit"},[t._v("电子邮件")]),a("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入电子邮件","placeholder-class":"placeholder"},model:{value:t.userInfo.email,callback:function(e){t.$set(t.userInfo,"email",e)},expression:"userInfo.email"}}),t.userInfo.email_active?t._e():a("v-uni-button",{staticClass:"del-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toTest.apply(void 0,arguments)}}},[t._v(t._s(t.emailText))])],1)],1),a("v-uni-button",{staticClass:"add-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v("确认")])],1)},s=[]},c04b:function(t,e,a){"use strict";(function(t){var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=n(a("1da1")),s=n(a("5530")),r=n(a("919f")),o=a("2f62"),u={data:function(){return{emailText:"去验证",userInfo:{username:"",mobile:"",email:"",email_active:!1}}},created:function(){this.getDate()},methods:(0,s.default)((0,s.default)({},(0,o.mapMutations)(["logout"])),{},{getDate:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return uni.showLoading(),a.next=3,(0,r.default)({url:"/user/detail/",method:"get",headers:{Authorization:"JWT "+uni.getStorageSync("userInfo").token}}).then((function(a){t("log",a," at pages/set/userInfo.vue:54"),e.userInfo=a.data,uni.hideLoading()})).catch((function(e){t("log",e," at pages/set/userInfo.vue:58")}));case 3:case"end":return a.stop()}}),a)})))()},toTest:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("去验证"!==e.emailText){a.next=3;break}return a.next=3,(0,r.default)({url:"/user/email/",method:"put",data:{email:e.userInfo.email},headers:{Authorization:"JWT "+uni.getStorageSync("userInfo").token}}).then((function(a){t("log",a," at pages/set/userInfo.vue:75"),200===a.status&&(e.emailText="已发送")})).catch((function(e){t("log",e," at pages/set/userInfo.vue:80")}));case 3:case"end":return a.stop()}}),a)})))()},confirm:function(){var e=this;this.userInfo.username?/(^1[3|4|5|7|8][0-9]{9}$)/.test(this.userInfo.mobile)?this.userInfo.email?(0,r.default)({url:"/user/detail/",method:"put",data:this.userInfo,headers:{Authorization:"JWT "+uni.getStorageSync("userInfo").token}}).then((function(a){if(t("log",a," at pages/set/userInfo.vue:110"),200===a.status)e.$api.msg("资料修改成功"),e.logout(),setTimeout((function(){uni.switchTab({url:"/pages/user/user"})}),800);else if(400===a.status)return void e.$api.msg(a.data.username[0])})).catch((function(a){t("log",a," at pages/set/userInfo.vue:124"),e.$api.msg("资料修改失败")})):this.$api.msg("请填写电子邮箱"):this.$api.msg("请填写手机号码"):this.$api.msg("请填写用户名")}})};e.default=u}).call(this,a("0de9")["log"])}}]);