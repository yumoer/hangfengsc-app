(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-coupon-exchange"],{"097f":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={lgdTab:a("7966").default,xwEmpty:a("6ae3").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticStyle:{padding:"30upx 30upx 0 30upx"}},[i("lgd-tab",{attrs:{tabValue:t.tabValue},on:{getIndex:function(e){arguments[0]=e=t.$handleEvent(e),t.getIndex.apply(void 0,arguments)}}})],1),t.isEmpty?i("v-uni-view",[i("xw-empty",{attrs:{isShow:t.isEmpty,img:"/static/empty/emptyCoupon.png",path:"/pages/coupon/coupon",btnText:"去领取",text:"您还没有领取优惠券",textColor:"#C0C4CC"}})],1):i("v-uni-view",{staticClass:"row"},[t._l(t.tikets,(function(e,a){return 0===t.Index?i("v-uni-view",{key:a,class:"back_wrap"+e.coupons.type,style:{background:0===e.type?"../../static/index/djj.png":1===e.type?"../../static/index/zkj.png":"../../static/index/mjj.png"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.lookPrice(e)}}},[i("v-uni-view",{staticClass:"wrap_left"},[t._v("￥"),i("v-uni-text",{staticClass:"wrap_price"},[t._v(t._s(Math.round(e.coupons.reduction)))]),0===e.coupons.type?i("v-uni-text",{staticClass:"wrap_type"},[t._v("代金券")]):t._e(),1===e.coupons.type?i("v-uni-text",{staticClass:"wrap_type"},[t._v("折扣券")]):t._e(),2===e.coupons.type?i("v-uni-text",{staticClass:"wrap_type"},[t._v("满减券")]):t._e()],1),i("v-uni-view",{staticClass:"wrap_center"},[i("v-uni-view",{staticClass:"wrap_name"},[t._v(t._s(e.coupons.cat_name)+"专用")]),i("v-uni-view",{staticClass:"wrap_full"},[t._v("满 "+t._s(e.coupons.full)+" 使用")]),i("v-uni-view",{staticClass:"wrap_time"},[t._v("有效期至"+t._s(e.coupons.end_time.split("T")[0]))])],1),1!==t.source?i("v-uni-view",{staticClass:"wrap_right"},[i("v-uni-button",{staticClass:"wrap_btn",attrs:{type:"default"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.naToPage(e)}}},[t._v("使用")])],1):t._e()],1):t._e()})),t._l(t.tikets,(function(e,n){return 1===t.Index?i("v-uni-view",{key:n,staticClass:"type",class:"back_wrap"+e.coupons.type,style:{background:0===e.type?"../../static/index/djj.png":1===e.type?"../../static/index/zkj.png":"../../static/index/mjj.png"}},[i("v-uni-view",{staticClass:"wrap_left"},[t._v("￥"),i("v-uni-text",{staticClass:"wrap_price"},[t._v(t._s(Math.round(e.coupons.reduction)))]),0===e.coupons.type?i("v-uni-text",{staticClass:"wrap_type"},[t._v("代金券")]):t._e(),1===e.coupons.type?i("v-uni-text",{staticClass:"wrap_type"},[t._v("折扣券")]):t._e(),2===e.coupons.type?i("v-uni-text",{staticClass:"wrap_type"},[t._v("满减券")]):t._e()],1),i("v-uni-view",{staticClass:"wrap_right"},[i("v-uni-view",{staticClass:"wrap_name"},[t._v(t._s(e.coupons.cat_name)+"专用")]),i("v-uni-view",{staticClass:"wrap_full"},[t._v("满 "+t._s(e.coupons.full)+" 使用")]),i("v-uni-view",{staticClass:"wrap_time"},[t._v(t._s(e.coupons.start_time.split("T")[0])+"~"+t._s(e.coupons.end_time.split("T")[0]))]),i("v-uni-image",{staticClass:"wrap_image",attrs:{src:a("4b96"),mode:""}})],1)],1):t._e()})),t._l(t.tikets,(function(e,n){return 2===t.Index?i("v-uni-view",{key:n,staticClass:"type",class:"back_wrap"+e.coupons.type,style:{background:0===e.type?"../../static/index/djj.png":1===e.type?"../../static/index/zkj.png":"../../static/index/mjj.png"}},[i("v-uni-view",{staticClass:"wrap_left"},[t._v("￥"),i("v-uni-text",{staticClass:"wrap_price"},[t._v(t._s(Math.round(e.coupons.reduction)))]),0===e.coupons.type?i("v-uni-text",{staticClass:"wrap_type"},[t._v("代金券")]):t._e(),1===e.coupons.type?i("v-uni-text",{staticClass:"wrap_type"},[t._v("折扣券")]):t._e(),2===e.coupons.type?i("v-uni-text",{staticClass:"wrap_type"},[t._v("满减券")]):t._e()],1),i("v-uni-view",{staticClass:"wrap_right"},[i("v-uni-view",{staticClass:"wrap_name"},[t._v(t._s(e.coupons.cat_name)+"专用")]),i("v-uni-view",{staticClass:"wrap_full"},[t._v("满 "+t._s(e.coupons.full)+" 使用")]),i("v-uni-view",{staticClass:"wrap_time"},[t._v(t._s(e.coupons.start_time.split("T")[0])+"~"+t._s(e.coupons.end_time.split("T")[0]))]),i("v-uni-image",{staticClass:"wrap_image",attrs:{src:a("5ed1"),mode:""}})],1)],1):t._e()}))],2)],1)},o=[]},"109c":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"xw-empty",props:{text:{type:String,default:""},img:{type:String,default:""},textColor:{type:String,default:""},isShow:{type:Boolean,default:!1},btnText:{type:String,default:""},path:{type:String,default:""}},methods:{navTo:function(e){t("log",e," at components/xw-empty/xw-empty.vue:40"),uni.switchTab({url:e}),uni.navigateTo({url:e})}}};e.default=a}).call(this,a("0de9")["log"])},1118:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".scrollView[data-v-f0e3c0fe]{width:100%;white-space:nowrap;margin-bottom:10px}.tabBox[data-v-f0e3c0fe]{display:flex;align-items:center}.items[data-v-f0e3c0fe]{padding:6px %?20?%}.tabText[data-v-f0e3c0fe]{color:#666}.active[data-v-f0e3c0fe]{font-weight:700}.underscore[data-v-f0e3c0fe]{transition:.2s all}",""]),t.exports=e},"1de5":function(t,e,a){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},3540:function(t,e,a){"use strict";var i=a("b875"),n=a.n(i);n.a},"367e":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isShow?a("v-uni-view",{staticClass:"empty"},[a("v-uni-image",{staticClass:"empty_image",attrs:{src:t.img,mode:"widthFix"}}),a("v-uni-text",{style:{color:t.textColor}},[t._v(t._s(t.text))]),t.path?a("v-uni-button",{staticClass:"add-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo(t.path)}}},[t._v(t._s(t.btnText))]):t._e()],1):t._e()},o=[]},3698:function(t,e,a){t.exports=a.p+"static/img/mjj.178112b3.png"},4700:function(t,e,a){t.exports=a.p+"static/img/djj.7c47579e.png"},"4b96":function(t,e,a){t.exports=a.p+"static/img/yishiyong.4e780efc.png"},"4e6c":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* uni.scss */\n/* 主题色 */\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 页面左右间距 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 背景颜色 */\n/* 行为相关颜色 */.empty[data-v-d662ec24]{position:relative;left:0;top:0;width:100%;height:80vh;padding-bottom:%?100?%;display:flex;justify-content:center;flex-direction:column;align-items:center;background:#f7f7f7}.empty .empty_image[data-v-d662ec24]{width:%?517.7?%;height:%?360.425?%;margin-bottom:%?30?%}.empty .empty-tips[data-v-d662ec24]{display:flex;justify-content:center;font-size:%?26?%;color:#c0c4cc}.empty .empty-tips .navigator[data-v-d662ec24]{color:#fa436a;margin-left:%?16?%}.empty .add-btn[data-v-d662ec24]{margin-top:%?40?%;font-size:%?32?%;width:%?234?%;color:#ee1d23;background-color:#fa436a;border-radius:%?50?%;background:#fff;box-shadow:1px 2px 5px rgba(219,63,96,.4);letter-spacing:%?6?%}',""]),t.exports=e},"505e":function(t,e,a){"use strict";a.r(e);var i=a("5a3a"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"53b5":function(t,e,a){t.exports=a.p+"static/img/zkj.ebedb371.png"},"5a3a":function(t,e,a){"use strict";(function(t){var i=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530")),o=i(a("919f")),r=i(a("6ae3")),s=a("2f62"),c=i(a("7966")),p={data:function(){return{exNum:"",source:0,tikets:[],show:!0,isEmpty:!0,tabValue:["已兑换","已使用","已过期"],Index:0}},components:{xwEmpty:r.default,lgdTab:c.default},computed:(0,n.default)({},(0,s.mapState)(["hasLogin"])),watch:{tikets:function(e){t("log",e," at pages/coupon/exchange.vue:84"),this.tikets=e;var a=0===e.length;t("log",this.isEmpty,a," at pages/coupon/exchange.vue:87"),this.isEmpty!==a&&(this.isEmpty=a)}},onLoad:function(e){t("log",e," at pages/coupon/exchange.vue:94"),this.source=+e.source,t("log",this.source," at pages/coupon/exchange.vue:96"),1===this.source?(this.tabValue=["已兑换"],this.tikets=uni.getStorage("couponList")):this.getIndex()},methods:{getIndex:function(t){this.Index=t,0===t?this.useTiket(1):1===t?this.useTiket(2):2===t&&this.useTiket(3)},useTiket:function(e){var a=this;(0,o.default)({url:"/user/coupons/user/"+e+"/",method:"GET",params:{page:1,page_size:10,ordering:"-create_time"},headers:{Authorization:"JWT "+uni.getStorageSync("userInfo").token}}).then((function(e){t("log",e," at pages/coupon/exchange.vue:128"),200===e.status?a.tikets=e.data.results:401===e.status?a.$api.msg("用户过期或未登录"):500===e.status&&a.$api.msg("服务器错误")})).catch((function(e){t("log",e," at pages/coupon/exchange.vue:137")}))},lookPrice:function(e){if(1==this.source)return t("log",e," at pages/coupon/exchange.vue:142"),this.$api.prePage().tiket=e,void uni.navigateBack()},showHide:function(e){t("log",e," at pages/coupon/exchange.vue:152"),this.$api.msg(e.coupons.explain,4e3)},naToPage:function(t){uni.navigateTo({url:"/pages/coupon/couponShop?skus="+JSON.stringify(t.coupons.skus)})},confirm:function(){var e=this;this.exNum?(0,o.default)({url:"coupons/redeem/",method:"GET",data:{pk:this.exNum},headers:{Authorization:"JWT "+uni.getStorageSync("userInfo").token}}).then((function(a){if(t("log",a," at pages/coupon/exchange.vue:179"),200===a.status){if(e.$api.msg(a.data.message),"兑换成功"!==a.data.message)return void t("log","兑换码错误"," at pages/coupon/exchange.vue:186");t("log","兑换成功"," at pages/coupon/exchange.vue:183"),e.useTiket()}else if(401===a.status)return void e.$api.msg("用户过期或未登录")})).catch((function(e){t("log",e," at pages/coupon/exchange.vue:194")})):this.$api.msg("请填写兑换码")}}};e.default=p}).call(this,a("0de9")["log"])},"5aa8":function(t,e,a){"use strict";a.r(e);var i=a("86f4"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"5d11":function(t,e,a){var i=a("4e6c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("1379280d",i,!0,{sourceMap:!1,shadowMode:!1})},"5ed1":function(t,e,a){t.exports=a.p+"static/img/yiguoqi.6901985e.png"},"616a":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-x":!0,"show-scrollbar":"false","scroll-left":t.scrollLeft,"scroll-with-animation":!0}},[a("v-uni-view",{staticClass:"tabBox",style:{"justify-content":t.isOutWindow?"":"space-around"}},t._l(t.tabValue,(function(e,i){return a("v-uni-view",{key:i,staticClass:"items",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickTab(i)}}},[a("v-uni-text",{staticClass:"tabText",class:i==t.tIndex?"active":"",style:{"font-size":t.fontSize+"px",color:i==t.tIndex?t.textColor:""}},[t._v(t._s(e))])],1)})),1),a("v-uni-view",{staticClass:"underscore",style:{width:t.inderWidth+"px","margin-left":t.indexLeft+t.boxLeft+"px","background-color":t.textColor,height:"3px"}})],1)],1)},o=[]},6177:function(t,e,a){"use strict";var i=a("5d11"),n=a.n(i);n.a},"6ae3":function(t,e,a){"use strict";a.r(e);var i=a("367e"),n=a("d8ae");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("6177");var r,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"d662ec24",null,!1,i["a"],r);e["default"]=c.exports},7966:function(t,e,a){"use strict";a.r(e);var i=a("616a"),n=a("5aa8");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("a26f");var r,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"f0e3c0fe",null,!1,i["a"],r);e["default"]=c.exports},"86f4":function(t,e,a){"use strict";a("a9e3"),a("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{tabValue:{type:Array,default:[],required:!0},textColor:{type:String,default:"#EE1D23"},fontSize:{type:Number,default:16}},data:function(){return{windowsWidth:0,boxLeft:0,isOutWindow:!1,inderWidth:0,indexLeft:0,scrollLeft:0,tIndex:0}},methods:{clickTab:function(t){var e=this;this.tIndex=t,this.$emit("getIndex",t),this.isOutWindow&&t>=0&&uni.createSelectorQuery().in(this).select(".tabBox").boundingClientRect().exec((function(a){e.boxLeft=0==t?0:-a[0].left})),uni.createSelectorQuery().in(this).selectAll(".items").boundingClientRect().exec((function(a){var i=a[0][t].width,n=a[0][t].left,o=0;if(e.isOutWindow){0==t&&(n=0);for(var r=0;r<t;r++)o+=a[0][r].width;e.windowsWidth/2<o+i?e.scrollLeft=i/2-(e.windowsWidth/2-o):e.scrollLeft=0}e.inderWidth=i/2,e.indexLeft=(i-i/2)/8+n}))}},created:function(){var t=this;uni.getSystemInfo({success:function(e){t.windowsWidth=e.windowWidth}})},mounted:function(){var t=this;uni.createSelectorQuery().in(this).selectAll(".items").boundingClientRect().exec((function(e){e[0][t.tabValue.length-1].right>t.windowsWidth&&(t.isOutWindow=!0)})),this.clickTab(0)}};e.default=i},a26f:function(t,e,a){"use strict";var i=a("bd0b"),n=a.n(i);n.a},b875:function(t,e,a){var i=a("dfae");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("5e19ae53",i,!0,{sourceMap:!1,shadowMode:!1})},bd0b:function(t,e,a){var i=a("1118");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("71792c87",i,!0,{sourceMap:!1,shadowMode:!1})},d8ae:function(t,e,a){"use strict";a.r(e);var i=a("109c"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},dfae:function(t,e,a){var i=a("24fb"),n=a("1de5"),o=a("4700"),r=a("53b5"),s=a("3698");e=i(!1);var c=n(o),p=n(r),u=n(s);e.push([t.i,".row[data-v-619469ac]{padding:%?30?%}.row .back_wrap0[data-v-619469ac]{width:100%;height:%?250?%;margin-bottom:%?30?%;background:url("+c+");background-size:100% 100%;position:relative}.row .back_wrap0 .wrap_left[data-v-619469ac]{width:32%;height:100%;float:left;color:#fff;text-align:center;padding-top:%?50?%}.row .back_wrap0 .wrap_left .wrap_price[data-v-619469ac]{font-size:%?64?%;font-weight:700}.row .back_wrap0 .wrap_left .wrap_type[data-v-619469ac]{display:block;padding:%?20?%}.row .back_wrap0 .wrap_center[data-v-619469ac]{width:40%;height:100%;float:left;padding:%?40?%}.row .back_wrap0 .wrap_center .wrap_name[data-v-619469ac]{font-size:%?32?%;color:#000;font-weight:700}.row .back_wrap0 .wrap_center .wrap_full[data-v-619469ac]{font-size:%?24?%;color:#666;font-weight:700;margin:14px 0}.row .back_wrap0 .wrap_center .wrap_time[data-v-619469ac]{font-size:%?24?%;color:#333;font-weight:700;margin:14px 0;width:150px}.row .back_wrap0 .wrap_center .wrap_image[data-v-619469ac]{position:absolute;right:15px;top:20px;width:%?160?%;height:%?160?%}.row .back_wrap0 .wrap_right[data-v-619469ac]{width:28%;height:100%;float:right;padding:%?40?%}.row .back_wrap0 .wrap_right .wrap_btn[data-v-619469ac]{position:relative;right:15px;top:30px;width:%?160?%;height:%?60?%;line-height:%?60?%;border:1px solid #ee1d23;border-radius:18px;color:#ee1d23;font-size:%?32?%}.row .back_wrap1[data-v-619469ac]{width:100%;height:%?250?%;margin-bottom:%?30?%;background:url("+p+");background-size:100% 100%;position:relative}.row .back_wrap1 .wrap_left[data-v-619469ac]{width:32%;height:100%;float:left;color:#fff;text-align:center;padding-top:%?50?%}.row .back_wrap1 .wrap_left .wrap_price[data-v-619469ac]{font-size:%?64?%;font-weight:700}.row .back_wrap1 .wrap_left .wrap_type[data-v-619469ac]{display:block;padding-top:%?20?%}.row .back_wrap1 .wrap_center[data-v-619469ac]{width:40%;height:100%;float:left;padding:%?40?%}.row .back_wrap1 .wrap_center .wrap_name[data-v-619469ac]{font-size:%?32?%;color:#000;font-weight:700}.row .back_wrap1 .wrap_center .wrap_full[data-v-619469ac]{font-size:%?24?%;color:#666;font-weight:700;margin:14px 0}.row .back_wrap1 .wrap_center .wrap_time[data-v-619469ac]{font-size:%?24?%;color:#333;font-weight:700;margin:14px 0;width:150px}.row .back_wrap1 .wrap_center .wrap_image[data-v-619469ac]{position:absolute;right:15px;top:20px;width:%?160?%;height:%?160?%}.row .back_wrap1 .wrap_right[data-v-619469ac]{width:28%;height:100%;float:right;padding:%?40?%}.row .back_wrap1 .wrap_right .wrap_btn[data-v-619469ac]{position:relative;right:15px;top:30px;width:%?160?%;height:%?60?%;line-height:%?60?%;border:1px solid #ee1d23;border-radius:18px;color:#ee1d23;font-size:%?32?%}.row .back_wrap2[data-v-619469ac]{width:100%;height:%?250?%;margin-bottom:%?30?%;background:url("+u+");background-size:100% 100%}.row .back_wrap2 .wrap_left[data-v-619469ac]{width:32%;height:100%;float:left;color:#fff;text-align:center;padding-top:%?50?%}.row .back_wrap2 .wrap_left .wrap_price[data-v-619469ac]{font-size:%?64?%;font-weight:700}.row .back_wrap2 .wrap_left .wrap_type[data-v-619469ac]{display:block;padding-top:%?20?%}.row .back_wrap2 .wrap_center[data-v-619469ac]{width:40%;height:100%;float:left;padding:%?40?%}.row .back_wrap2 .wrap_center .wrap_name[data-v-619469ac]{font-size:%?32?%;color:#000;font-weight:700}.row .back_wrap2 .wrap_center .wrap_full[data-v-619469ac]{font-size:%?24?%;color:#666;font-weight:700;margin:14px 0}.row .back_wrap2 .wrap_center .wrap_time[data-v-619469ac]{font-size:%?24?%;color:#333;font-weight:700;margin:14px 0;width:150px}.row .back_wrap2 .wrap_center .wrap_image[data-v-619469ac]{position:absolute;right:15px;top:20px;width:%?160?%;height:%?160?%}.row .back_wrap2 .wrap_right[data-v-619469ac]{width:28%;height:100%;float:right;padding:%?40?%}.row .back_wrap2 .wrap_right .wrap_btn[data-v-619469ac]{position:relative;right:15px;top:30px;width:%?160?%;height:%?60?%;line-height:%?60?%;border:1px solid #ee1d23;border-radius:18px;color:#ee1d23;font-size:%?32?%}.row .type[data-v-619469ac]{opacity:.4}",""]),t.exports=e},e5f7:function(t,e,a){"use strict";a.r(e);var i=a("097f"),n=a("505e");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("3540");var r,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"619469ac",null,!1,i["a"],r);e["default"]=c.exports}}]);