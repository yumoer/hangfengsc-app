(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-visitor-visitor"],{"40a3":function(t,a,i){"use strict";var e;i.d(a,"b",(function(){return o})),i.d(a,"c",(function(){return n})),i.d(a,"a",(function(){return e}));var o=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",{staticClass:"login"},[i("v-uni-view",{staticClass:"login-top bg-active"},[i("v-uni-view",{staticClass:"desc"},[i("v-uni-view",{staticClass:"title"},[t._v("Hi~")]),t.formdata.name?i("v-uni-text",[t._v(t._s(t.formdata.name)+",欢迎您")]):i("v-uni-text",[t._v("请登记")])],1),i("v-uni-image",{staticClass:"login-pic",attrs:{src:"/static/login-pic.png"}})],1),t.showView?i("v-uni-form",{staticClass:"form"},[i("v-uni-input",{staticClass:"formItem",attrs:{value:t.name,type:"text",placeholder:"输入姓名","data-key":"name"},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.inputChange.apply(void 0,arguments)}}}),i("v-uni-input",{staticClass:"formItem",attrs:{value:t.mobile,type:"number",maxlength:"11","data-key":"mobile",placeholder:"输入联系方式"},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.inputChange.apply(void 0,arguments)}}}),i("v-uni-view",{staticStyle:{position:"relative"}},[i("v-uni-input",{staticClass:"formItem",attrs:{value:t.sms_code,placeholder:"输入手机验证码",maxlength:"6",type:"number","data-key":"sms_code"},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.inputChange.apply(void 0,arguments)}}}),t.send?i("v-uni-view",{staticStyle:{position:"absolute",right:"20px",top:"5px"}},[i("v-uni-button",{staticStyle:{"background-color":"#fa436a",color:"#fff","font-size":"12px",height:"40px","line-height":"40px","border-radius":"20px"},attrs:{type:"text"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.mobileCode(t.mobile)}}},[t._v("获取验证码")])],1):t._e(),t.send?t._e():i("v-uni-view",{staticStyle:{position:"absolute",right:"20px",top:"5px"}},[i("v-uni-button",{staticStyle:{"background-color":"#fff",color:"#fa436a","font-size":"12px",height:"40px","line-height":"40px","border-radius":"20px",border:"1px solid #fa436a"},attrs:{type:"text",disabled:""},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.mobileCode.apply(void 0,arguments)}}},[t._v(t._s(t.time)+"s后重新获取")])],1)],1),i("v-uni-input",{staticClass:"formItem",attrs:{value:t.company,type:"text",placeholder:"输入所属公司","data-key":"company"},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.inputChange.apply(void 0,arguments)}}}),i("v-uni-input",{staticClass:"formItem",attrs:{value:t.msg,type:"text",placeholder:"输入访问目的","data-key":"msg"},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.inputChange.apply(void 0,arguments)}}}),i("v-uni-input",{staticClass:"formItem",attrs:{value:t.company_user,type:"text",placeholder:"输入访问人员","data-key":"company_user"},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.inputChange.apply(void 0,arguments)}}}),i("v-uni-button",{staticClass:"formItem submit",attrs:{"form-type":"submit"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.formSubmit.apply(void 0,arguments)}}},[t._v("登 记")])],1):i("v-uni-form",{staticClass:"form"},[t.formdata.name?i("v-uni-input",{staticClass:"formItem",attrs:{disabled:!0,value:"姓 名 ："+t.formdata.name,type:"text"}}):t._e(),t.formdata.mobile?i("v-uni-input",{staticClass:"formItem",attrs:{disabled:!0,value:"联 系 方 式 ："+t.formdata.mobile}}):t._e(),t.formdata.company?i("v-uni-input",{staticClass:"formItem",attrs:{disabled:!0,value:"所 属 公 司 ："+t.formdata.company,type:"text"}}):t._e(),t.formdata.msg?i("v-uni-input",{staticClass:"formItem",attrs:{disabled:!0,value:"访 问 目 的 ："+t.formdata.msg,type:"text"}}):t._e(),t.formdata.company_user?i("v-uni-input",{staticClass:"formItem",attrs:{disabled:!0,value:"访 问 人 员 ："+t.formdata.company_user,type:"text"}}):t._e(),i("v-uni-button",{staticClass:"formItem submit",attrs:{"form-type":"submit"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.formClose.apply(void 0,arguments)}}},[t._v("再 次 登 记")])],1)],1)},n=[]},"49db":function(t,a,i){"use strict";i.r(a);var e=i("40a3"),o=i("8d0e");for(var n in o)"default"!==n&&function(t){i.d(a,t,(function(){return o[t]}))}(n);i("9b94");var s,r=i("f0c5"),l=Object(r["a"])(o["default"],e["b"],e["c"],!1,null,"07f0b85a",null,!1,e["a"],s);a["default"]=l.exports},6988:function(t,a,i){"use strict";(function(t){var e=i("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=e(i("919f")),n={data:function(){return{name:"",mobile:"",sms_code:"",company:"",msg:"",company_user:"",formdata:{company:"",company_user:"",mobile:"",msg:"",name:""},send:!0,time:60,showView:!0}},methods:{mobileCode:function(){var a=this;t("log",this.mobile," at pages/visitor/visitor.vue:145");var i=/^1[3-9]\d{9}$/;""===this.mobile?this.$api.msg("请输入手机号"):11!==this.mobile.length?this.$api.msg("手机号少于11位"):i.test(this.mobile)?o.default.get("/sms/common/"+this.mobile).then((function(t){if(200===t.status){if("ok"!==t.data.message)return void a.$api.msg(t.data.message);var i=setInterval((function(){a.send=!1,a.time-=1,a.time<1&&(clearInterval(i),a.send=!0)}),1e3)}else 400===t.status&&a.$api.msg(t.data.non_field_errors[0])})).catch((function(a){t("log",a," at pages/visitor/visitor.vue:172")})):this.$api.msg("手机号格式错误")},inputChange:function(t){var a=t.currentTarget.dataset.key;this[a]=t.detail.value},formSubmit:function(a){var i=this;t("log",a," at pages/visitor/visitor.vue:182");var e={name:this.name,mobile:this.mobile,sms_code:this.sms_code,company:this.company,msg:this.msg,company_user:this.company_user};t("log",e," at pages/visitor/visitor.vue:191"),e.name?e.mobile?e.sms_code?e.company?e.msg?e.company_user?(uni.showLoading({title:"登录中......",mask:!0}),(0,o.default)({url:"/wx/visitor/",method:"POST",data:e}).then((function(a){t("log",a," at pages/visitor/visitor.vue:232"),201===a.status?(uni.hideLoading(),i.$api.msg("登记成功"),i.formdata=a.data,i.showView=!1,i.name="",i.mobile="",i.sms_code="",i.company="",i.msg="",i.company_user=""):400===a.status&&(a.data.sms_code[0]?i.$api.msg(a.data.sms_code[0]):i.$api.msg("登记失败"))})).catch((function(a){t("log",a," at pages/visitor/visitor.vue:252"),i.$api.msg("服务器错误")}))):uni.showToast({title:"访问人员不能为空",icon:"none"}):uni.showToast({title:"访问目的不能为空",icon:"none"}):uni.showToast({title:"所属公司不能为空",icon:"none"}):uni.showToast({title:"验证码不能为空",icon:"none"}):uni.showToast({title:"联系方式不能为空",icon:"none"}):uni.showToast({title:"姓名不能为空",icon:"none"})},formClose:function(){this.showView=!0,this.send=!0,this.time=0,this.formdata={}}}};a.default=n}).call(this,i("0de9")["log"])},"8d0e":function(t,a,i){"use strict";i.r(a);var e=i("6988"),o=i.n(e);for(var n in e)"default"!==n&&function(t){i.d(a,t,(function(){return e[t]}))}(n);a["default"]=o.a},"9b94":function(t,a,i){"use strict";var e=i("a8ba"),o=i.n(e);o.a},a8ba:function(t,a,i){var e=i("f567");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var o=i("4f06").default;o("d7a05c22",e,!0,{sourceMap:!1,shadowMode:!1})},f567:function(t,a,i){var e=i("24fb");a=e(!1),a.push([t.i,".login .text-center[data-v-07f0b85a]{text-align:center}.login .bg-active[data-v-07f0b85a]{background-color:#fa436a;color:#fff}.login .titleImg[data-v-07f0b85a]{height:auto;width:%?426?%;margin-top:%?60?%}.login .login-top[data-v-07f0b85a]{height:%?360?%;position:relative}.login .login-top .desc[data-v-07f0b85a]{color:#fff;position:absolute;top:%?120?%;left:%?40?%;font-size:%?48?%}.login .login-top .desc .title[data-v-07f0b85a]{font-size:%?48?%}.login .login-top .login-pic[data-v-07f0b85a]{position:absolute;width:%?220?%;height:%?270?%;right:%?60?%;top:%?40?%}.login .form[data-v-07f0b85a]{padding:%?60?%;display:block}.login .form .formItem[data-v-07f0b85a]{box-sizing:border-box;width:100%;height:%?112?%;background-color:#f9f9f9;font-size:%?36?%;padding:%?32?%;margin:%?20?% 0;border-radius:%?56?%}.login .form .formItem.submit[data-v-07f0b85a]{background-color:#fa436a;color:#fff;text-align:center;font-size:%?40?%;line-height:%?40?%}.login .form .formItem.submits[data-v-07f0b85a]{background-color:#fff;color:#fa436a;border:1px solid #fa436a;text-align:center;font-size:%?40?%;line-height:%?40?%}",""]),t.exports=a}}]);